/*! For license information please see main.425aa12b.iframe.bundle.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{346:function(module,exports,__webpack_require__){__webpack_require__(347),__webpack_require__(502),__webpack_require__(503),__webpack_require__(698),module.exports=__webpack_require__(691)},4:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Types})),__webpack_require__.d(__webpack_exports__,"b",(function(){return createTabster})),__webpack_require__.d(__webpack_exports__,"c",(function(){return disposeTabster})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getCurrentTabster})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getDeloser})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getGroupper})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getModalizer})),__webpack_require__.d(__webpack_exports__,"h",(function(){return getMover})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getTabsterAttribute}));__webpack_require__(47),__webpack_require__(331),__webpack_require__(332),__webpack_require__(55),__webpack_require__(326),__webpack_require__(24),__webpack_require__(31),__webpack_require__(26),__webpack_require__(30),__webpack_require__(82),__webpack_require__(653),__webpack_require__(660),__webpack_require__(662),__webpack_require__(663),__webpack_require__(664),__webpack_require__(667),__webpack_require__(668),__webpack_require__(669),__webpack_require__(670),__webpack_require__(671),__webpack_require__(672),__webpack_require__(673),__webpack_require__(674),__webpack_require__(676),__webpack_require__(677),__webpack_require__(678),__webpack_require__(679),__webpack_require__(680),__webpack_require__(681),__webpack_require__(682),__webpack_require__(683),__webpack_require__(687),__webpack_require__(688),__webpack_require__(689),__webpack_require__(150),__webpack_require__(154),__webpack_require__(206),__webpack_require__(69),__webpack_require__(151),__webpack_require__(327),__webpack_require__(40),__webpack_require__(34),__webpack_require__(690),__webpack_require__(103),__webpack_require__(80);var tslib_es6=__webpack_require__(1),_canUseWeakRef="undefined"!=typeof WeakRef,WeakRefInstance=function(){function WeakRefInstance(instance){_canUseWeakRef?this._weakRef=new WeakRef(instance):this._instance=instance}return WeakRefInstance.prototype.deref=function(){var _a,_b,_c,instance;return this._weakRef?(instance=null===(_a=this._weakRef)||void 0===_a?void 0:_a.deref())||delete this._weakRef:(null===(_c=null===(_b=instance=this._instance)||void 0===_b?void 0:_b.isDisposed)||void 0===_c?void 0:_c.call(_b))&&delete this._instance,instance},WeakRefInstance}();var _canOverrideNativeFocus=!1;function nativeFocus(element){var focus=element.focus;focus.__keyborgNativeFocus?focus.__keyborgNativeFocus.call(element):element.focus()}var _lastId=0,_state=new(function(){function KeyborgState(){this.__keyborgCoreRefs={},this._isNavigatingWithKeyboard=!1}return KeyborgState.prototype.add=function(keyborg){var id=keyborg.id;id in this.__keyborgCoreRefs||(this.__keyborgCoreRefs[id]=new WeakRefInstance(keyborg))},KeyborgState.prototype.remove=function(id){delete this.__keyborgCoreRefs[id],0===Object.keys(this.__keyborgCoreRefs).length&&(this._isNavigatingWithKeyboard=!1)},KeyborgState.prototype.setVal=function(isNavigatingWithKeyboard){if(this._isNavigatingWithKeyboard!==isNavigatingWithKeyboard){this._isNavigatingWithKeyboard=isNavigatingWithKeyboard;for(var _i=0,_a=Object.keys(this.__keyborgCoreRefs);_i<_a.length;_i++){var id=_a[_i],keyborg=this.__keyborgCoreRefs[id].deref();keyborg?keyborg.update(isNavigatingWithKeyboard):this.remove(id)}}},KeyborgState.prototype.getVal=function(){return this._isNavigatingWithKeyboard},KeyborgState}()),KeyborgCore=function(){function KeyborgCore(win){var _this=this;this._isMouseUsed=!1,this._onFocusIn=function(e){if(_this._isMouseUsed)_this._isMouseUsed=!1;else if(!_state.getVal()){var details=e.details;details.relatedTarget&&(details.isFocusedProgrammatically||void 0===details.isFocusedProgrammatically||_state.setVal(!0))}},this._onMouseDown=function(e){0===e.buttons||0===e.clientX&&0===e.clientY&&0===e.screenX&&0===e.screenY||(_this._isMouseUsed=!0,_state.setVal(!1))},this._onKeyDown=function(e){var isNavigatingWithKeyboard=_state.getVal();isNavigatingWithKeyboard||9!==e.keyCode?isNavigatingWithKeyboard&&27===e.keyCode&&_this._scheduleDismiss():_state.setVal(!0)},this.id="c"+ ++_lastId,this._win=win;var doc=win.document;doc.addEventListener("keyborg:focusin",this._onFocusIn,!0),doc.addEventListener("mousedown",this._onMouseDown,!0),win.addEventListener("keydown",this._onKeyDown,!0),function setupFocusEvent(win){var kwin=win;_canOverrideNativeFocus||(_canOverrideNativeFocus=function canOverrideNativeFocus(win){var HTMLElement=win.HTMLElement,origFocus=HTMLElement.prototype.focus,isCustomFocusCalled=!1;return HTMLElement.prototype.focus=function focus(){isCustomFocusCalled=!0},win.document.createElement("button").focus(),HTMLElement.prototype.focus=origFocus,isCustomFocusCalled}(kwin));var origFocus=kwin.HTMLElement.prototype.focus;if(!origFocus.__keyborgNativeFocus){kwin.HTMLElement.prototype.focus=focus;var data=kwin.__keyborgData={focusInHandler:function focusInHandler(e){var _a,target=e.target;if(target){var event=document.createEvent("HTMLEvents");event.initEvent("keyborg:focusin",!0,!0);var details={relatedTarget:e.relatedTarget||void 0};(_canOverrideNativeFocus||data.lastFocusedProgrammatically)&&(details.isFocusedProgrammatically=target===(null===(_a=data.lastFocusedProgrammatically)||void 0===_a?void 0:_a.deref()),data.lastFocusedProgrammatically=void 0),event.details=details,target.dispatchEvent(event)}}};kwin.document.addEventListener("focusin",kwin.__keyborgData.focusInHandler,!0),focus.__keyborgNativeFocus=origFocus}function focus(){var keyborgNativeFocusEvent=kwin.__keyborgData;return keyborgNativeFocusEvent&&(keyborgNativeFocusEvent.lastFocusedProgrammatically=new WeakRefInstance(this)),origFocus.apply(this,arguments)}}(win),_state.add(this)}return KeyborgCore.prototype.dispose=function(){var win=this._win;if(win){this._dismissTimer&&(win.clearTimeout(this._dismissTimer),this._dismissTimer=void 0),function disposeFocusEvent(win){var kwin=win,proto=kwin.HTMLElement.prototype,origFocus=proto.focus.__keyborgNativeFocus,keyborgNativeFocusEvent=kwin.__keyborgData;keyborgNativeFocusEvent&&(kwin.document.removeEventListener("focusin",keyborgNativeFocusEvent.focusInHandler,!0),delete kwin.__keyborgData),origFocus&&(proto.focus=origFocus)}(win);var doc=win.document;doc.removeEventListener("keyborg:focusin",this._onFocusIn,!0),doc.removeEventListener("mousedown",this._onMouseDown,!0),win.removeEventListener("keydown",this._onKeyDown,!0),delete this._win,_state.remove(this.id)}},KeyborgCore.prototype.isDisposed=function(){return!!this._win},KeyborgCore.prototype.update=function(isNavigatingWithKeyboard){var _a,_b,keyborgs=null===(_b=null===(_a=this._win)||void 0===_a?void 0:_a.__keyborg)||void 0===_b?void 0:_b.refs;if(keyborgs)for(var _i=0,_c=Object.keys(keyborgs);_i<_c.length;_i++){var id=_c[_i];Keyborg.update(keyborgs[id],isNavigatingWithKeyboard)}},KeyborgCore.prototype._scheduleDismiss=function(){var _this=this,win=this._win;if(win){this._dismissTimer&&(win.clearTimeout(this._dismissTimer),this._dismissTimer=void 0);var was_1=win.document.activeElement;this._dismissTimer=win.setTimeout((function(){_this._dismissTimer=void 0;var cur=win.document.activeElement;was_1&&cur&&was_1===cur&&_state.setVal(!1)}),500)}},KeyborgCore}(),Keyborg=function(){function Keyborg(win){var _a;this._cb=[],this._id="k"+ ++_lastId,this._win=win;var current=win.__keyborg;current?(this._core=current.core,current.refs[this._id]=this):(this._core=new KeyborgCore(win),win.__keyborg={core:this._core,refs:(_a={},_a[this._id]=this,_a)})}return Keyborg.create=function(win){return new Keyborg(win)},Keyborg.dispose=function(instance){instance.dispose()},Keyborg.update=function(instance,isNavigatingWithKeyboard){instance._cb.forEach((function(callback){return callback(isNavigatingWithKeyboard)}))},Keyborg.prototype.dispose=function(){var _a,current=null===(_a=this._win)||void 0===_a?void 0:_a.__keyborg;(null==current?void 0:current.refs[this._id])&&(delete current.refs[this._id],0===Object.keys(current.refs).length&&(current.core.dispose(),delete this._win.__keyborg)),this._cb=[],delete this._core,delete this._win},Keyborg.prototype.isNavigatingWithKeyboard=function(){return _state.getVal()},Keyborg.prototype.subscribe=function(callback){this._cb.push(callback)},Keyborg.prototype.unsubscribe=function(callback){var index=this._cb.indexOf(callback);index>=0&&this._cb.splice(index,1)},Keyborg.prototype.setVal=function(isNavigatingWithKeyboard){_state.setVal(isNavigatingWithKeyboard)},Keyborg}();var ObservedElementAccesibilities={Any:0,Accessible:1,Focusable:2},RestoreFocusOrders={History:0,DeloserDefault:1,RootDefault:2,DeloserFirst:3,RootFirst:4},Visibilities={Invisible:0,PartiallyVisible:1,Visible:2},MoverDirections={Both:0,Vertical:1,Horizontal:2,Grid:3},GroupperTabbabilities={Unlimited:0,Limited:1,LimitedTrapFocus:2},Types={__proto__:null,TabsterAttributeName:"data-tabster",TabsterDummyInputAttributeName:"data-tabster-dummy",DeloserEventName:"tabster:deloser",ModalizerEventName:"tabster:modalizer",MoverEventName:"tabster:mover",ObservedElementAccesibilities:ObservedElementAccesibilities,RestoreFocusOrders:RestoreFocusOrders,Visibilities:Visibilities,MoverDirections:MoverDirections,GroupperTabbabilities:GroupperTabbabilities};function getTabsterOnElement(tabster,element){var _a;return null===(_a=tabster.storageEntry(element))||void 0===_a?void 0:_a.tabster}function updateTabsterByAttribute(tabster,element,dispose){var _a,_b,newAttr,newAttrValue=dispose||tabster._noop?void 0:element.getAttribute("data-tabster"),tabsteri=tabster,entry=tabsteri.storageEntry(element);if(newAttrValue){if(newAttrValue===(null===(_a=null==entry?void 0:entry.attr)||void 0===_a?void 0:_a.string))return;try{var newValue=JSON.parse(newAttrValue);if("object"!=typeof newValue)throw new Error("Value is not a JSON object, got '"+newAttrValue+"'.");newAttr={string:newAttrValue,object:newValue}}catch(e){0}}else if(!entry)return;entry||(entry=tabster.storageEntry(element,!0)),entry.tabster||(entry.tabster={});for(var tabsterOnElement=entry.tabster||{},oldTabsterProps=(null===(_b=entry.attr)||void 0===_b?void 0:_b.object)||{},newTabsterProps=(null==newAttr?void 0:newAttr.object)||{},_i=0,_c=Object.keys(oldTabsterProps);_i<_c.length;_i++){if(!newTabsterProps[key=_c[_i]]){if("root"===key){var root=tabsterOnElement[key];root&&tabsteri.updateRoot(root,!0)}else if("modalizer"===key){var modalizer=tabsterOnElement.modalizer;tabsteri.updateModalizer&&modalizer&&tabsteri.updateModalizer(modalizer,!0)}switch(key){case"deloser":case"root":case"groupper":case"modalizer":case"mover":var part=tabsterOnElement[key];part&&(part.dispose(),delete tabsterOnElement[key]);break;case"observed":delete tabsterOnElement[key],tabsteri.updateObserved&&tabsteri.updateObserved(element);break;case"focusable":case"outline":case"uncontrolled":delete tabsterOnElement[key]}}}for(var _d=0,_e=Object.keys(newTabsterProps);_d<_e.length;_d++){var key;switch(key=_e[_d]){case"deloser":tabsterOnElement.deloser?tabsterOnElement.deloser.setProps(newTabsterProps.deloser):tabsteri.createDeloser&&(tabsterOnElement.deloser=tabsteri.createDeloser(tabsteri,element,newTabsterProps.deloser));break;case"root":tabsterOnElement.root?tabsterOnElement.root.setProps(newTabsterProps.root):tabsterOnElement.root=tabsteri.createRoot(tabsteri,element,newTabsterProps.root),tabsteri.updateRoot(tabsterOnElement.root);break;case"modalizer":tabsterOnElement.modalizer?tabsterOnElement.modalizer.setProps(newTabsterProps.modalizer):tabsteri.createModalizer&&(tabsterOnElement.modalizer=tabsteri.createModalizer(tabsteri,element,newTabsterProps.modalizer));break;case"focusable":tabsterOnElement.focusable=newTabsterProps.focusable;break;case"groupper":tabsterOnElement.groupper?tabsterOnElement.groupper.setProps(newTabsterProps.groupper):tabsteri.createGroupper&&(tabsterOnElement.groupper=tabsteri.createGroupper(tabsteri,element,newTabsterProps.groupper));break;case"mover":tabsterOnElement.mover?tabsterOnElement.mover.setProps(newTabsterProps.mover):tabsteri.createMover&&(tabsterOnElement.mover=tabsteri.createMover(tabsteri,element,newTabsterProps.mover));break;case"observed":tabsteri.updateObserved&&(tabsterOnElement.observed=newTabsterProps.observed,tabsteri.updateObserved(element));break;case"uncontrolled":tabsterOnElement.uncontrolled=newTabsterProps.uncontrolled;break;case"outline":tabsteri.outline&&(tabsterOnElement.outline=newTabsterProps.outline);break;default:console.error("Unknown key '"+key+"' in data-tabster attribute value.")}}newAttr?entry.attr=newAttr:(0===Object.keys(tabsterOnElement).length&&(delete entry.tabster,delete entry.attr),tabsteri.storageEntry(element,!1))}var _isBrokenIE11,Subscribable=function(){function Subscribable(){this._callbacks=[]}return Subscribable.prototype.dispose=function(){this._callbacks=[],delete this._val},Subscribable.prototype.subscribe=function(callback){this._callbacks.indexOf(callback)<0&&this._callbacks.push(callback)},Subscribable.prototype.unsubscribe=function(callback){var index=this._callbacks.indexOf(callback);index>=0&&this._callbacks.splice(index,1)},Subscribable.prototype.setVal=function(val,details){this._val!==val&&(this._val=val,this._callCallbacks(val,details))},Subscribable.prototype.getVal=function(){return this._val},Subscribable.prototype.trigger=function(val,details){this._callCallbacks(val,details)},Subscribable.prototype._callCallbacks=function(val,details){this._callbacks.forEach((function(callback){return callback(val,details)}))},Subscribable}(),tabster_esm_KeyboardNavigationState=function(_super){function KeyboardNavigationState(getWindow){var _this=_super.call(this)||this;return _this._onChange=function(isNavigatingWithKeyboard){_this.setVal(isNavigatingWithKeyboard,void 0)},_this._keyborg=function createKeyborg(win){return Keyborg.create(win)}(getWindow()),_this._keyborg.subscribe(_this._onChange),_this}return Object(tslib_es6.c)(KeyboardNavigationState,_super),KeyboardNavigationState.prototype.dispose=function(){_super.prototype.dispose.call(this),this._keyborg&&(this._keyborg.unsubscribe(this._onChange),function disposeKeyborg(instance){Keyborg.dispose(instance)}(this._keyborg),delete this._keyborg)},KeyboardNavigationState.dispose=function(instance){instance.dispose()},KeyboardNavigationState.setVal=function(instance,val){var _a;null===(_a=instance._keyborg)||void 0===_a||_a.setVal(val)},KeyboardNavigationState.prototype.isNavigatingWithKeyboard=function(){var _a;return!!(null===(_a=this._keyborg)||void 0===_a?void 0:_a.isNavigatingWithKeyboard())},KeyboardNavigationState}(Subscribable),_DOMRect="undefined"!=typeof DOMRect?DOMRect:function(){return function class_1(x,y,width,height){this.left=x||0,this.top=y||0,this.right=(x||0)+(width||0),this.bottom=(y||0)+(height||0)}}(),_uidCounter=0;try{document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT),_isBrokenIE11=!1}catch(e){_isBrokenIE11=!0}function getInstanceContext(getWindow){var win=getWindow(),ctx=win.__tabsterInstanceContext;return ctx||(ctx={elementByUId:{},basics:{Promise:win.Promise||void 0,WeakRef:win.WeakRef||void 0},containerBoundingRectCache:{},lastContainerBoundingRectCacheId:0,fakeWeakRefs:[],fakeWeakRefsStarted:!1},win.__tabsterInstanceContext=ctx),ctx}var FakeWeakRef=function(){function FakeWeakRef(target){this._target=target}return FakeWeakRef.prototype.deref=function(){return this._target},FakeWeakRef.cleanup=function(fwr,forceRemove){return!fwr._target||!(!forceRemove&&documentContains(fwr._target.ownerDocument,fwr._target))&&(delete fwr._target,!0)},FakeWeakRef}(),WeakHTMLElement=function(){function WeakHTMLElement(getWindow,element,data){var ref,context=getInstanceContext(getWindow);context.WeakRef?ref=new context.WeakRef(element):(ref=new FakeWeakRef(element),context.fakeWeakRefs.push(ref)),this._ref=ref,this._data=data}return WeakHTMLElement.prototype.get=function(){var element,ref=this._ref;return ref&&((element=ref.deref())||delete this._ref),element},WeakHTMLElement.prototype.getData=function(){return this._data},WeakHTMLElement}();function cleanupFakeWeakRefs(getWindow,forceRemove){var context=getInstanceContext(getWindow);context.fakeWeakRefs=context.fakeWeakRefs.filter((function(e){return!FakeWeakRef.cleanup(e,forceRemove)}))}function startFakeWeakRefsCleanup(getWindow){var context=getInstanceContext(getWindow);context.fakeWeakRefsStarted||(context.fakeWeakRefsStarted=!0,context.WeakRef=function getWeakRef(context){return context.basics.WeakRef}(context)),context.fakeWeakRefsTimer||(context.fakeWeakRefsTimer=getWindow().setTimeout((function(){context.fakeWeakRefsTimer=void 0,cleanupFakeWeakRefs(getWindow),startFakeWeakRefsCleanup(getWindow)}),12e4))}function createElementTreeWalker(doc,root,acceptNode){if(root.nodeType===Node.ELEMENT_NODE){var filter=_isBrokenIE11?acceptNode:{acceptNode:acceptNode};return doc.createTreeWalker(root,NodeFilter.SHOW_ELEMENT,filter,!1)}}function getBoundingRect(getWindow,element){var cacheId=element.__tabsterCacheId,context=getInstanceContext(getWindow),cached=cacheId?context.containerBoundingRectCache[cacheId]:void 0;if(cached)return cached.rect;var scrollingElement=element.ownerDocument&&element.ownerDocument.documentElement;if(!scrollingElement)return new _DOMRect;var left=0,top=0,right=scrollingElement.clientWidth,bottom=scrollingElement.clientHeight;if(element!==scrollingElement){var r=element.getBoundingClientRect();left=Math.max(left,r.left),top=Math.max(top,r.top),right=Math.min(right,r.right),bottom=Math.min(bottom,r.bottom)}var rect=new _DOMRect(left<right?left:-1,top<bottom?top:-1,left<right?right-left:0,top<bottom?bottom-top:0);return cacheId||(cacheId="r-"+ ++context.lastContainerBoundingRectCacheId,element.__tabsterCacheId=cacheId),context.containerBoundingRectCache[cacheId]={rect:rect,element:element},context.containerBoundingRectCacheTimer||(context.containerBoundingRectCacheTimer=window.setTimeout((function(){context.containerBoundingRectCacheTimer=void 0;for(var _i=0,_a=Object.keys(context.containerBoundingRectCache);_i<_a.length;_i++){var cId=_a[_i];delete context.containerBoundingRectCache[cId].element.__tabsterCacheId}context.containerBoundingRectCache={}}),50)),rect}function isElementVerticallyVisibleInContainer(getWindow,element){var container=getScrollableContainer(element);if(container){var containerRect=getBoundingRect(getWindow,container),elementRect=element.getBoundingClientRect();return elementRect.top>=containerRect.top&&elementRect.bottom<=containerRect.bottom}return!1}function isElementVisibleInContainer(getWindow,element,gap){void 0===gap&&(gap=0);var container=getScrollableContainer(element);if(container){var containerRect=getBoundingRect(getWindow,container),elementRect=element.getBoundingClientRect();return elementRect.left>containerRect.right||elementRect.top>containerRect.bottom||elementRect.bottom<containerRect.top||elementRect.right<containerRect.left?Visibilities.Invisible:elementRect.top+gap>=containerRect.top&&elementRect.top<=containerRect.bottom&&elementRect.bottom>=containerRect.top&&elementRect.bottom-gap<=containerRect.bottom&&elementRect.left+gap>=containerRect.left&&elementRect.left<=containerRect.right&&elementRect.right>=containerRect.left&&elementRect.right-gap<=containerRect.right?Visibilities.Visible:Visibilities.PartiallyVisible}return Visibilities.Invisible}function scrollIntoView(getWindow,element,alignToTop){var container=getScrollableContainer(element);if(container){var containerRect=getBoundingRect(getWindow,container),elementRect=element.getBoundingClientRect();container.scrollTop+=alignToTop?elementRect.top-containerRect.top:elementRect.bottom-containerRect.bottom}}function getScrollableContainer(element){var doc=element.ownerDocument;if(doc){for(var el=element.parentElement;el;el=el.parentElement)if(el.scrollWidth>el.clientWidth||el.scrollHeight>el.clientHeight)return el;return doc.documentElement}return null}function shouldIgnoreFocus(element){return!!element.__shouldIgnoreFocus}function getUId(wnd){var rnd=new Uint32Array(4);if(wnd.crypto&&wnd.crypto.getRandomValues)wnd.crypto.getRandomValues(rnd);else if(wnd.msCrypto&&wnd.msCrypto.getRandomValues)wnd.msCrypto.getRandomValues(rnd);else for(var i=0;i<rnd.length;i++)rnd[i]=4294967295*Math.random();var srnd=[];for(i=0;i<rnd.length;i++)srnd.push(rnd[i].toString(36));return srnd.push("|"),srnd.push((++_uidCounter).toString(36)),srnd.push("|"),srnd.push(Date.now().toString(36)),srnd.join("")}function getElementUId(getWindow,element){var context=getInstanceContext(getWindow),uid=element.__tabsterElementUID;return uid||(uid=element.__tabsterElementUID=getUId(getWindow())),!context.elementByUId[uid]&&documentContains(element.ownerDocument,element)&&(context.elementByUId[uid]=new WeakHTMLElement(getWindow,element)),uid}function clearElementCache(getWindow,parent){for(var context=getInstanceContext(getWindow),_i=0,_a=Object.keys(context.elementByUId);_i<_a.length;_i++){var key=_a[_i],wel=context.elementByUId[key],el=wel&&wel.get();el&&parent&&!parent.contains(el)||delete context.elementByUId[key]}}function documentContains(doc,element){var _a;return!!(null===(_a=null==doc?void 0:doc.body)||void 0===_a?void 0:_a.contains(element))}function matchesSelector(element,selector){var matches=element.matches||element.matchesSelector||element.msMatchesSelector||element.webkitMatchesSelector;return matches&&matches.call(element,selector)}function getPromise(getWindow){var context=getInstanceContext(getWindow);if(context.basics.Promise)return context.basics.Promise;throw new Error("No Promise defined.")}var _lastTabsterPartId=0,tabster_esm_TabsterPart=function(){function TabsterPart(tabster,element,props){var getWindow=tabster.getWindow;this._tabster=tabster,this._element=new WeakHTMLElement(getWindow,element),this._props=Object(tslib_es6.a)({},props),this.id="i"+ ++_lastTabsterPartId}return TabsterPart.prototype.getElement=function(){return this._element.get()},TabsterPart.prototype.getProps=function(){return this._props},TabsterPart.prototype.setProps=function(props){this._props=Object(tslib_es6.a)({},props)},TabsterPart}(),DummyInput=function(){function DummyInput(getWindow,isPhantom,focusIn,focusOut,props){var _this=this;this._focusIn=function(e){_this._onFocusIn&&_this.input&&_this._onFocusIn(_this.input,_this.props)},this._focusOut=function(e){_this._onFocusOut&&_this.input&&_this._onFocusOut(_this.input,_this.props),_this._isPhantom&&_this.dispose()};var input=getWindow().document.createElement("div");input.tabIndex=0,input.setAttribute("role","none"),input.setAttribute("data-tabster-dummy",""),input.setAttribute("aria-hidden","true");var style=input.style;style.position="fixed",style.width=style.height="1px",style.left=style.top="-100500px",style.opacity="0",style.zIndex="-1",function makeFocusIgnored(element){element.__shouldIgnoreFocus=!0}(input),this.input=input,this._isPhantom=isPhantom,this._onFocusIn=focusIn,this._onFocusOut=focusOut,this.props=props,input.addEventListener("focusin",this._focusIn),input.addEventListener("focusout",this._focusOut)}return DummyInput.prototype.dispose=function(){var _a,input=this.input;input&&(delete this._onFocusIn,delete this._onFocusOut,delete this.input,input.removeEventListener("focusin",this._focusIn),input.removeEventListener("focusout",this._focusOut),null===(_a=input.parentElement)||void 0===_a||_a.removeChild(input))},DummyInput}();function getLastChild(container){for(var lastChild=null,i=container.lastElementChild;i;i=i.lastElementChild)lastChild=i;return lastChild}function triggerEvent(target,name,details){var event=document.createEvent("HTMLEvents");return event.initEvent(name,!0,!0),event.details=details,target.dispatchEvent(event),!event.defaultPrevented}var tabster_esm_Root=function(_super){function Root(tabster,element,forgetFocusedGrouppers,props){var _this=_super.call(this,tabster,element,props)||this;_this._onFocus=function(e){if(e){var ctx=RootAPI.getTabsterContext(_this._tabster,e);if(!ctx||ctx.uncontrolled)return void _this._setDummyInputsActive(!1)}_this._setDummyInputsActive(!0)},_this._onDummyInputFocus=function(input,props){if(props.shouldMoveOut);else{tabster_esm_KeyboardNavigationState.setVal(_this._tabster.keyboardNavigation,!0),_this._forgetFocusedGrouppers();var element=_this._element.get();if(element)if(props.isFirst?_this._tabster.focusedElement.focusFirst({container:element}):_this._tabster.focusedElement.focusLast({container:element}))return;input.blur()}},_this._onDummyInputBlur=function(input,props){props.shouldMoveOut=!1};var win=tabster.getWindow;return _this.uid=getElementUId(win,element),_this._forgetFocusedGrouppers=forgetFocusedGrouppers,_this._dummyInputFirst=new DummyInput(win,!1,_this._onDummyInputFocus,_this._onDummyInputBlur,{isFirst:!0,isActive:!0}),_this._dummyInputLast=new DummyInput(win,!1,_this._onDummyInputFocus,_this._onDummyInputBlur,{isFirst:!1,isActive:!0}),_this._add(),_this._addDummyInputs(),tabster.focusedElement.subscribe(_this._onFocus),_this._observeMutations(element),_this}return Object(tslib_es6.c)(Root,_super),Root.prototype.dispose=function(){this._tabster.focusedElement.unsubscribe(this._onFocus),this._unobserve&&(this._unobserve(),this._unobserve=void 0),this._remove();var dif=this._dummyInputFirst;dif&&(dif.dispose(),delete this._dummyInputFirst);var dil=this._dummyInputLast;dil&&(dil.dispose(),delete this._dummyInputLast),this._forgetFocusedGrouppers=function(){}},Root.prototype.moveOutWithDefaultAction=function(backwards){var first=this._dummyInputFirst,last=this._dummyInputLast;(null==first?void 0:first.input)&&(null==last?void 0:last.input)&&(backwards?(first.props.shouldMoveOut=!0,nativeFocus(first.input)):(last.props.shouldMoveOut=!0,nativeFocus(last.input)))},Root.prototype._observeMutations=function(element){var _this=this;if(!this._unobserve&&"undefined"!=typeof MutationObserver){var observer=new MutationObserver((function(mutations){_this._addDummyInputs()}));observer.observe(element,{childList:!0}),this._unobserve=function(){observer.disconnect()}}},Root.prototype._setDummyInputsActive=function(isActive){for(var _i=0,_a=[this._dummyInputFirst,this._dummyInputLast];_i<_a.length;_i++){var dummy=_a[_i];dummy&&dummy.props.isActive!==isActive&&dummy.input&&(dummy.input.tabIndex=isActive?0:-1,dummy.props.isActive=isActive)}},Root.prototype._add=function(){0},Root.prototype._remove=function(){this._removeDummyInputs()},Root.prototype._addDummyInputs=function(){var _a,_b,element=this._element.get(),dif=null===(_a=this._dummyInputFirst)||void 0===_a?void 0:_a.input,dil=null===(_b=this._dummyInputLast)||void 0===_b?void 0:_b.input;if(element&&dif&&dil){element.lastElementChild!==dil&&element.appendChild(dil);var firstElementChild=element.firstElementChild;firstElementChild&&firstElementChild!==dif&&element.insertBefore(dif,firstElementChild)}},Root.prototype._removeDummyInputs=function(){var _a,_b,dif=null===(_a=this._dummyInputFirst)||void 0===_a?void 0:_a.input,dil=null===(_b=this._dummyInputLast)||void 0===_b?void 0:_b.input;(null==dif?void 0:dif.parentElement)&&dif.parentElement.removeChild(dif),(null==dil?void 0:dil.parentElement)&&dil.parentElement.removeChild(dil)},Root}(tabster_esm_TabsterPart),RootAPI=function(){function RootAPI(tabster,forgetFocusedGrouppers,autoRoot){var _this=this;this.rootById={},this._init=function(){_this._initTimer=void 0},this._tabster=tabster,this._win=tabster.getWindow,this._forgetFocusedGrouppers=forgetFocusedGrouppers,this._initTimer=this._win().setTimeout(this._init,0),this._autoRoot=autoRoot}return RootAPI.prototype.dispose=function(){var win=this._win();this._autoRootInstance&&(this._autoRootInstance.dispose(),delete this._autoRootInstance,delete this._autoRoot),this._initTimer&&(win.clearTimeout(this._initTimer),this._initTimer=void 0),this._forgetFocusedGrouppers=function(){},this.rootById={}},RootAPI.dispose=function(instance){instance.dispose()},RootAPI.getRootByUId=function(getWindow,id){var tabster=getWindow().__tabsterInstance;return tabster&&tabster.root.rootById[id]},RootAPI.getTabsterContext=function(tabster,element,options){var _a;if(void 0===options&&(options={}),element.ownerDocument){for(var root,modalizer,groupper,mover,isGroupperFirst,isRtl,uncontrolled,checkRtl=options.checkRtl,curElement=element;curElement&&(!root||checkRtl);){var tabsterOnElement=getTabsterOnElement(tabster,curElement);if(checkRtl&&void 0===isRtl){var dir=curElement.dir;dir&&(isRtl="rtl"===dir.toLowerCase())}if(tabsterOnElement){tabsterOnElement.uncontrolled&&(uncontrolled=curElement);var curGroupper=tabsterOnElement.groupper,curMover=tabsterOnElement.mover;!groupper&&curGroupper&&(groupper=curGroupper),!mover&&curMover&&(mover=curMover,isGroupperFirst=!!groupper),!modalizer&&tabsterOnElement.modalizer&&(modalizer=tabsterOnElement.modalizer),tabsterOnElement.root&&(root=tabsterOnElement.root),curElement=curElement.parentElement}else curElement=curElement.parentElement}if(!root){var rootAPI=tabster.root,autoRoot=rootAPI._autoRoot;if(autoRoot&&!rootAPI._autoRootInstance){var body=null===(_a=element.ownerDocument)||void 0===_a?void 0:_a.body;body&&(rootAPI._autoRootInstance=new tabster_esm_Root(rootAPI._tabster,body,rootAPI._forgetFocusedGrouppers,autoRoot))}root=rootAPI._autoRootInstance}return root?{root:root,modalizer:modalizer,groupper:groupper,mover:mover,isGroupperFirst:isGroupperFirst,isRtl:checkRtl?!!isRtl:void 0,uncontrolled:uncontrolled}:void 0}},RootAPI.onRoot=function(instance,root,removed){removed?delete instance.rootById[root.uid]:instance.rootById[root.uid]=root},RootAPI.createRoot=function(tabster,element,props){return new tabster_esm_Root(tabster,element,tabster.root._forgetFocusedGrouppers,props)},RootAPI}(),DeloserItemBase=function(){return function DeloserItemBase(){}}(),tabster_esm_DeloserItem=function(_super){function DeloserItem(tabster,deloser){var _this=_super.call(this)||this;return _this.uid=deloser.uid,_this._tabster=tabster,_this._deloser=deloser,_this}return Object(tslib_es6.c)(DeloserItem,_super),DeloserItem.prototype.belongsTo=function(deloser){return deloser===this._deloser},DeloserItem.prototype.unshift=function(element){this._deloser.unshift(element)},DeloserItem.prototype.focusAvailable=function(){return Object(tslib_es6.b)(this,void 0,void 0,(function(){var available;return Object(tslib_es6.d)(this,(function(_a){return[2,!!(available=this._deloser.findAvailable())&&this._tabster.focusedElement.focus(available)]}))}))},DeloserItem.prototype.resetFocus=function(){return Object(tslib_es6.b)(this,void 0,void 0,(function(){return Object(tslib_es6.d)(this,(function(_a){return[2,getPromise(this._tabster.getWindow).resolve(this._deloser.resetFocus())]}))}))},DeloserItem}(DeloserItemBase),DeloserHistoryByRootBase=function(){function DeloserHistoryByRootBase(tabster,rootUId){this._history=[],this._tabster=tabster,this.rootUId=rootUId}return DeloserHistoryByRootBase.prototype.getLength=function(){return this._history.length},DeloserHistoryByRootBase.prototype.removeDeloser=function(deloser){this._history=this._history.filter((function(c){return!c.belongsTo(deloser)}))},DeloserHistoryByRootBase.prototype.hasDeloser=function(deloser){return this._history.some((function(d){return d.belongsTo(deloser)}))},DeloserHistoryByRootBase}(),tabster_esm_DeloserHistoryByRoot=function(_super){function DeloserHistoryByRoot(){return null!==_super&&_super.apply(this,arguments)||this}return Object(tslib_es6.c)(DeloserHistoryByRoot,_super),DeloserHistoryByRoot.prototype.unshiftToDeloser=function(deloser,element){for(var item,i=0;i<this._history.length;i++)if(this._history[i].belongsTo(deloser)){item=this._history[i],this._history.splice(i,1);break}item||(item=new tabster_esm_DeloserItem(this._tabster,deloser)),item.unshift(element),this._history.unshift(item),this._history.splice(10,this._history.length-10)},DeloserHistoryByRoot.prototype.focusAvailable=function(from){return Object(tslib_es6.b)(this,void 0,void 0,(function(){var skip,_i,_a,i,_b;return Object(tslib_es6.d)(this,(function(_c){switch(_c.label){case 0:skip=!!from,_i=0,_a=this._history,_c.label=1;case 1:return _i<_a.length?(i=_a[_i],from&&i.belongsTo(from)&&(skip=!1),(_b=!skip)?[4,i.focusAvailable()]:[3,3]):[3,5];case 2:_b=_c.sent(),_c.label=3;case 3:if(_b)return[2,!0];_c.label=4;case 4:return _i++,[3,1];case 5:return[2,!1]}}))}))},DeloserHistoryByRoot.prototype.resetFocus=function(from){return Object(tslib_es6.b)(this,void 0,void 0,(function(){var skip,resetQueue,_i,_a,i,_b,_c,id;return Object(tslib_es6.d)(this,(function(_d){switch(_d.label){case 0:for(skip=!!from,resetQueue={},_i=0,_a=this._history;_i<_a.length;_i++)i=_a[_i],from&&i.belongsTo(from)&&(skip=!1),skip||resetQueue[i.uid]||(resetQueue[i.uid]=i);_b=0,_c=Object.keys(resetQueue),_d.label=1;case 1:return _b<_c.length?(id=_c[_b],[4,resetQueue[id].resetFocus()]):[3,4];case 2:if(_d.sent())return[2,!0];_d.label=3;case 3:return _b++,[3,1];case 4:return[2,!1]}}))}))},DeloserHistoryByRoot}(DeloserHistoryByRootBase),tabster_esm_DeloserHistory=function(){function DeloserHistory(tabster){this._history=[],this._tabster=tabster}return DeloserHistory.prototype.dispose=function(){this._history=[]},DeloserHistory.prototype.process=function(element){var _a,_this=this,ctx=RootAPI.getTabsterContext(this._tabster,element),rootUId=ctx&&ctx.root.uid,deloser=tabster_esm_DeloserAPI.getDeloser(this._tabster,element);if(rootUId&&deloser){var historyByRoot=this.make(rootUId,(function(){return new tabster_esm_DeloserHistoryByRoot(_this._tabster,rootUId)}));return ctx&&ctx.modalizer&&!(null===(_a=ctx.modalizer)||void 0===_a?void 0:_a.isActive())||historyByRoot.unshiftToDeloser(deloser,element),deloser}},DeloserHistory.prototype.make=function(rootUId,createInstance){for(var historyByRoot,i=0;i<this._history.length;i++){var hbr=this._history[i];if(hbr.rootUId===rootUId){historyByRoot=hbr,this._history.splice(i,1);break}}return historyByRoot||(historyByRoot=createInstance()),this._history.unshift(historyByRoot),this._history.splice(10,this._history.length-10),historyByRoot},DeloserHistory.prototype.removeDeloser=function(deloser){this._history.forEach((function(i){i.removeDeloser(deloser)})),this._history=this._history.filter((function(i){return i.getLength()>0}))},DeloserHistory.prototype.focusAvailable=function(from){return Object(tslib_es6.b)(this,void 0,void 0,(function(){var skip,_i,_a,h,_b;return Object(tslib_es6.d)(this,(function(_c){switch(_c.label){case 0:skip=!!from,_i=0,_a=this._history,_c.label=1;case 1:return _i<_a.length?(h=_a[_i],from&&h.hasDeloser(from)&&(skip=!1),(_b=!skip)?[4,h.focusAvailable(from)]:[3,3]):[3,5];case 2:_b=_c.sent(),_c.label=3;case 3:if(_b)return[2,!0];_c.label=4;case 4:return _i++,[3,1];case 5:return[2,!1]}}))}))},DeloserHistory.prototype.resetFocus=function(from){return Object(tslib_es6.b)(this,void 0,void 0,(function(){var skip,_i,_a,h,_b;return Object(tslib_es6.d)(this,(function(_c){switch(_c.label){case 0:skip=!!from,_i=0,_a=this._history,_c.label=1;case 1:return _i<_a.length?(h=_a[_i],from&&h.hasDeloser(from)&&(skip=!1),(_b=!skip)?[4,h.resetFocus(from)]:[3,3]):[3,5];case 2:_b=_c.sent(),_c.label=3;case 3:if(_b)return[2,!0];_c.label=4;case 4:return _i++,[3,1];case 5:return[2,!1]}}))}))},DeloserHistory}();function buildElementSelector(element,withClass,withIndex){var selector=[],escapeRegExp=/(:|\.|\[|\]|,|=|@)/g;element.id&&selector.push("#"+element.id.replace(escapeRegExp,"\\$1")),!1!==withClass&&element.className&&element.className.split(" ").forEach((function(cls){(cls=cls.trim())&&selector.push("."+cls.replace(escapeRegExp,"\\$1"))}));var el,index=0;if(!1!==withIndex&&0===selector.length){for(el=element;el;)index++,el=el.previousElementSibling;selector.unshift(":nth-child("+index+")")}return selector.unshift(element.tagName.toLowerCase()),selector.join("")}var tabster_esm_Deloser=function(_super){function Deloser(tabster,element,onDispose,props){var _this=_super.call(this,tabster,element,props)||this;return _this._isActive=!1,_this._history=[[]],_this._snapshotIndex=0,_this.isActive=function(){return _this._isActive},_this.setSnapshot=function(index){_this._snapshotIndex=index,_this._history.length>index+1&&_this._history.splice(index+1,_this._history.length-index-1),_this._history[index]||(_this._history[index]=[])},_this.focusFirst=function(){var e=_this._element.get();return!!e&&_this._tabster.focusedElement.focusFirst({container:e})},_this.focusDefault=function(){var e=_this._element.get();return!!e&&_this._tabster.focusedElement.focusDefault(e)},_this.resetFocus=function(){var e=_this._element.get();return!!e&&_this._tabster.focusedElement.resetFocus(e)},_this.clearHistory=function(preserveExisting){var element=_this._element.get();_this._history[_this._snapshotIndex]=element?_this._history[_this._snapshotIndex].filter((function(we){var e=we.get();return!(!e||!preserveExisting)&&element.contains(e)})):[]},_this.uid=getElementUId(tabster.getWindow,element),_this._onDispose=onDispose,_this}return Object(tslib_es6.c)(Deloser,_super),Deloser.prototype.dispose=function(){this._remove(),this._onDispose(this),this._isActive=!1,this._snapshotIndex=0,this._props={},this._history=[]},Deloser.prototype.setActive=function(active){this._isActive=active},Deloser.prototype.getActions=function(){return{focusDefault:this.focusDefault,focusFirst:this.focusFirst,resetFocus:this.resetFocus,clearHistory:this.clearHistory,setSnapshot:this.setSnapshot,isActive:this.isActive}},Deloser.prototype.unshift=function(element){var cur=this._history[this._snapshotIndex];for((cur=this._history[this._snapshotIndex]=cur.filter((function(we){var e=we.get();return e&&e!==element}))).unshift(new WeakHTMLElement(this._tabster.getWindow,element,function buildSelector(element){if(documentContains(element.ownerDocument,element)){for(var selector=[buildElementSelector(element)],el=element.parentElement;el;){var isBody="BODY"===el.tagName;if(selector.unshift(buildElementSelector(el,!1,!isBody)),isBody)break;el=el.parentElement}return selector.join(" ")}}(element)));cur.length>10;)cur.pop()},Deloser.prototype.findAvailable=function(){var element=this._element.get();if(!element||!this._tabster.focusable.isVisible(element))return null;var restoreFocusOrder=this._props.restoreFocusOrder,available=null,ctx=RootAPI.getTabsterContext(this._tabster,element);if(!ctx)return null;var root=ctx.root,rootElement=root.getElement();if(!rootElement)return null;if(void 0===restoreFocusOrder&&(restoreFocusOrder=root.getProps().restoreFocusOrder),restoreFocusOrder===RestoreFocusOrders.RootDefault&&(available=this._tabster.focusable.findDefault({container:rootElement})),available||restoreFocusOrder!==RestoreFocusOrders.RootFirst||(available=this._findFirst(rootElement)),available)return available;var availableInHistory=this._findInHistory(),availableDefault=this._tabster.focusable.findDefault({container:element}),availableFirst=this._findFirst(element);return availableInHistory&&restoreFocusOrder===RestoreFocusOrders.History?availableInHistory:availableDefault&&restoreFocusOrder===RestoreFocusOrders.DeloserDefault?availableDefault:availableFirst&&restoreFocusOrder===RestoreFocusOrders.DeloserFirst?availableFirst:availableDefault||availableInHistory||availableFirst||null},Deloser.prototype.customFocusLostHandler=function(element){return triggerEvent(element,"tabster:deloser",this.getActions())},Deloser.prototype._findInHistory=function(){var cur=this._history[this._snapshotIndex].slice(0);this.clearHistory(!0);for(var i=0;i<cur.length;i++){var we=cur[i],e=we.get(),element=this._element.get();if(e&&element&&element.contains(e)){if(this._tabster.focusable.isFocusable(e))return e}else if(!this._props.noSelectorCheck){var selector=we.getData();if(selector&&element){var els=void 0;try{els=element.ownerDocument.querySelectorAll(selector)}catch(e){0;continue}for(var i_1=0;i_1<els.length;i_1++){var el=els[i_1];if(el&&this._tabster.focusable.isFocusable(el))return el}}}}return null},Deloser.prototype._findFirst=function(element){if(this._tabster.keyboardNavigation.isNavigatingWithKeyboard()){var first=this._tabster.focusable.findFirst({container:element});if(first)return first}return null},Deloser.prototype._remove=function(){0},Deloser}(tabster_esm_TabsterPart),tabster_esm_DeloserAPI=function(){function DeloserAPI(tabster,props){var _this=this;this._inDeloser=!1,this._isRestoringFocus=!1,this._isPaused=!1,this._init=function(){_this._initTimer=void 0,_this._tabster.focusedElement.subscribe(_this._onFocus)},this._onFocus=function(e){if(_this._restoreFocusTimer&&(_this._win().clearTimeout(_this._restoreFocusTimer),_this._restoreFocusTimer=void 0),e){var deloser=_this._history.process(e);deloser?_this._activate(deloser):_this._deactivate()}else _this._scheduleRestoreFocus()},this._onDeloserDispose=function(deloser){_this._history.removeDeloser(deloser),deloser.isActive()&&_this._scheduleRestoreFocus()},this._tabster=tabster,this._win=tabster.getWindow,this._history=new tabster_esm_DeloserHistory(tabster),this._initTimer=this._win().setTimeout(this._init,0);var autoDeloser=null==props?void 0:props.autoDeloser;autoDeloser&&(this._autoDeloser=autoDeloser)}return DeloserAPI.prototype.dispose=function(){var win=this._win();this._initTimer&&(win.clearTimeout(this._initTimer),this._initTimer=void 0),this._restoreFocusTimer&&(win.clearTimeout(this._restoreFocusTimer),this._restoreFocusTimer=void 0),this._autoDeloserInstance&&(this._autoDeloserInstance.dispose(),delete this._autoDeloserInstance,delete this._autoDeloser),this._tabster.focusedElement.unsubscribe(this._onFocus),this._history.dispose(),delete this._curDeloser},DeloserAPI.dispose=function(instance){instance.dispose()},DeloserAPI.prototype.getActions=function(element){for(var e=element;e;e=e.parentElement){var tabsterOnElement=getTabsterOnElement(this._tabster,e);if(tabsterOnElement&&tabsterOnElement.deloser)return tabsterOnElement.deloser.getActions()}},DeloserAPI.prototype.pause=function(){this._isPaused=!0,this._restoreFocusTimer&&(this._win().clearTimeout(this._restoreFocusTimer),this._restoreFocusTimer=void 0)},DeloserAPI.prototype.resume=function(restore){this._isPaused=!1,restore&&this._scheduleRestoreFocus()},DeloserAPI.prototype._activate=function(deloser){var curDeloser=this._curDeloser;curDeloser!==deloser&&(this._inDeloser=!0,null==curDeloser||curDeloser.setActive(!1),deloser.setActive(!0),this._curDeloser=deloser)},DeloserAPI.prototype._deactivate=function(){var _a;this._inDeloser=!1,null===(_a=this._curDeloser)||void 0===_a||_a.setActive(!1),this._curDeloser=void 0},DeloserAPI.prototype._scheduleRestoreFocus=function(force){var _this=this;if(!this._isPaused&&!this._isRestoringFocus){var restoreFocus=function restoreFocus(){return Object(tslib_es6.b)(_this,void 0,void 0,(function(){var lastFocused,curDeloser,el;return Object(tslib_es6.d)(this,(function(_a){switch(_a.label){case 0:if(this._restoreFocusTimer=void 0,lastFocused=this._tabster.focusedElement.getLastFocusedElement(),!force&&(this._isRestoringFocus||!this._inDeloser||(null==lastFocused?void 0:lastFocused.offsetParent)))return[2];if(curDeloser=this._curDeloser){if(lastFocused&&curDeloser.customFocusLostHandler(lastFocused))return[2];if((el=curDeloser.findAvailable())&&this._tabster.focusedElement.focus(el))return[2]}return this._deactivate(),this._isRestoringFocus=!0,[4,this._history.focusAvailable(null)];case 1:return _a.sent()?[3,3]:[4,this._history.resetFocus(null)];case 2:_a.sent(),_a.label=3;case 3:return this._isRestoringFocus=!1,[2]}}))}))};force?restoreFocus():this._restoreFocusTimer=this._win().setTimeout(restoreFocus,100)}},DeloserAPI.getDeloser=function(tabster,element){for(var _a,e=element;e;e=e.parentElement){var tabsterOnElement=getTabsterOnElement(tabster,e);if(tabsterOnElement&&tabsterOnElement.deloser)return tabsterOnElement.deloser}var tabsteri=tabster,deloserAPI=tabsteri.deloser&&tabsteri.deloser;if(deloserAPI){if(deloserAPI._autoDeloserInstance)return deloserAPI._autoDeloserInstance;var autoDeloserProps=deloserAPI._autoDeloser;if(!deloserAPI._autoDeloserInstance&&autoDeloserProps){var body=null===(_a=element.ownerDocument)||void 0===_a?void 0:_a.body;body&&(deloserAPI._autoDeloserInstance=new tabster_esm_Deloser(tabsteri,body,tabsteri.deloser._onDeloserDispose,autoDeloserProps))}return deloserAPI._autoDeloserInstance}},DeloserAPI.getHistory=function(instance){return instance._history},DeloserAPI.forceRestoreFocus=function(instance){instance._scheduleRestoreFocus(!0)},DeloserAPI.createDeloser=function(tabster,element,props){var _a;var deloser=new tabster_esm_Deloser(tabster,element,tabster.deloser._onDeloserDispose,props);return element.contains(null!==(_a=tabster.focusedElement.getFocusedElement())&&void 0!==_a?_a:null)&&tabster.deloser._activate(deloser),deloser},DeloserAPI}();var _focusableSelector=["a[href]","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","*[tabindex]","*[contenteditable]"].join(", "),tabster_esm_FocusableAPI=function(){function FocusableAPI(tabster,getWindow){this._tabster=tabster,this._win=getWindow}return FocusableAPI.prototype.dispose=function(){},FocusableAPI.dispose=function(instance){instance.dispose()},FocusableAPI.prototype._getBody=function(){var last=this._tabster.focusedElement.getLastFocusedElement();return last&&last.ownerDocument?last.ownerDocument.body:this._win().document.body},FocusableAPI.prototype.getProps=function(element){var tabsterOnElement=getTabsterOnElement(this._tabster,element);return tabsterOnElement&&tabsterOnElement.focusable||{}},FocusableAPI.prototype.isFocusable=function(el,includeProgrammaticallyFocusable,noVisibleCheck,noAccessibleCheck){return!(!matchesSelector(el,_focusableSelector)||!includeProgrammaticallyFocusable&&-1===el.tabIndex)&&((noVisibleCheck||this.isVisible(el))&&(noAccessibleCheck||this.isAccessible(el)))},FocusableAPI.prototype.isVisible=function(el){if(!el.ownerDocument)return!1;if(null===el.offsetParent&&el.ownerDocument.body!==el)return!1;var win=el.ownerDocument.defaultView;if(!win)return!1;var rect=el.ownerDocument.body.getBoundingClientRect();return(0!==rect.width||0!==rect.height)&&"hidden"!==win.getComputedStyle(el).visibility},FocusableAPI.prototype.isAccessible=function(el){for(var _a,e=el;e;e=e.parentElement){var tabsterOnElement=getTabsterOnElement(this._tabster,e);if(this._isHidden(e))return!1;if(!(null===(_a=null==tabsterOnElement?void 0:tabsterOnElement.focusable)||void 0===_a?void 0:_a.ignoreAriaDisabled)&&this._isDisabled(e))return!1}return!0},FocusableAPI.prototype._isDisabled=function(el){return el.hasAttribute("disabled")},FocusableAPI.prototype._isHidden=function(el){var attrVal=el.getAttribute("aria-hidden");return!(!attrVal||"true"!==attrVal.toLowerCase())},FocusableAPI.prototype.findFirst=function(options){return this.findElement(Object(tslib_es6.a)({container:this._getBody()},options))},FocusableAPI.prototype.findLast=function(options){return this.findElement(Object(tslib_es6.a)({container:this._getBody(),prev:!0},options))},FocusableAPI.prototype.findNext=function(options){return this.findElement(Object(tslib_es6.a)({container:this._getBody()},options))},FocusableAPI.prototype.findPrev=function(options){return this.findElement(Object(tslib_es6.a)({container:this._getBody(),prev:!0},options))},FocusableAPI.prototype.findDefault=function(options){var _this=this;return this.findElement(Object(tslib_es6.a)(Object(tslib_es6.a)({},options),{acceptCondition:function acceptCondition(el){return _this._tabster.focusable.isFocusable(el,options.includeProgrammaticallyFocusable)&&!!_this.getProps(el).isDefault}}))||null},FocusableAPI.prototype.findAll=function(options){var _this=this,container=options.container,customAcceptCondition=options.acceptCondition,includeProgrammaticallyFocusable=options.includeProgrammaticallyFocusable,ignoreGroupper=options.ignoreGroupper,ignoreUncontrolled=options.ignoreUncontrolled,ignoreAccessibiliy=options.ignoreAccessibiliy,skipDefaultCheck=options.skipDefaultCheck,acceptElementState={container:container,from:null,isForward:!0,acceptCondition:function acceptCondition(el){var defaultCheck,customCheck=!1;return(defaultCheck=!!skipDefaultCheck||_this._tabster.focusable.isFocusable(el,includeProgrammaticallyFocusable))&&(customCheck=!customAcceptCondition||customAcceptCondition(el)),defaultCheck&&customCheck},includeProgrammaticallyFocusable:includeProgrammaticallyFocusable,ignoreGroupper:ignoreGroupper,ignoreUncontrolled:ignoreUncontrolled,ignoreAccessibiliy:ignoreAccessibiliy,grouppers:{}},walker=createElementTreeWalker(container.ownerDocument,container,(function(node){return _this._acceptElement(node,acceptElementState)})),nodeFilter=null==walker?void 0:walker.filter;if(!walker||!nodeFilter)return[];for(var node,foundNodes=[];node=walker.nextNode();)foundNodes.push(node);return foundNodes},FocusableAPI.prototype.findElement=function(options){var _this=this,container=options.container,_a=options.currentElement,currentElement=void 0===_a?null:_a,includeProgrammaticallyFocusable=options.includeProgrammaticallyFocusable,ignoreGroupper=options.ignoreGroupper,ignoreUncontrolled=options.ignoreUncontrolled,ignoreAccessibiliy=options.ignoreAccessibiliy,prev=options.prev,onUncontrolled=options.onUncontrolled,acceptCondition=options.acceptCondition;if(!container)return null;if(!container.ownerDocument||currentElement&&container!==currentElement&&!container.contains(currentElement))return null;acceptCondition||(acceptCondition=function acceptCondition(el){return _this._tabster.focusable.isFocusable(el,includeProgrammaticallyFocusable,ignoreAccessibiliy,ignoreAccessibiliy)});var acceptElementState={container:container,from:currentElement,isForward:!prev,acceptCondition:acceptCondition,includeProgrammaticallyFocusable:includeProgrammaticallyFocusable,ignoreGroupper:ignoreGroupper,ignoreUncontrolled:ignoreUncontrolled,ignoreAccessibiliy:ignoreAccessibiliy,grouppers:{}},walker=createElementTreeWalker(container.ownerDocument,container,(function(node){return _this._acceptElement(node,acceptElementState)}));if(!walker)return null;if(currentElement)walker.currentNode=currentElement;else if(prev){var lastChild=getLastChild(container);if(!lastChild)return null;if(this._acceptElement(lastChild,acceptElementState)===NodeFilter.FILTER_ACCEPT)return lastChild;walker.currentNode=lastChild}var foundElement=prev?walker.previousNode():walker.nextNode(),nextUncontrolled=acceptElementState.nextUncontrolled;return nextUncontrolled&&(foundElement=foundElement?void 0:null,onUncontrolled&&onUncontrolled(nextUncontrolled)),acceptElementState.found?acceptElementState.foundElement:foundElement},FocusableAPI.prototype._acceptElement=function(element,state){if(element===state.container)return NodeFilter.FILTER_SKIP;if(state.found)return NodeFilter.FILTER_ACCEPT;var ctx=RootAPI.getTabsterContext(this._tabster,element);if(!ctx)return NodeFilter.FILTER_SKIP;if(state.ignoreUncontrolled){if(shouldIgnoreFocus(element))return NodeFilter.FILTER_SKIP}else if(ctx.groupper)state.nextGroupper=ctx.groupper.getElement();else if(ctx.mover)state.nextMover=ctx.mover.getElement();else if(ctx.uncontrolled&&!state.nextUncontrolled&&!ctx.groupper&&!ctx.mover)return state.nextUncontrolled=ctx.uncontrolled,NodeFilter.FILTER_REJECT;if("IFRAME"===element.tagName)return NodeFilter.FILTER_ACCEPT;if(!state.ignoreAccessibiliy&&!this.isAccessible(element))return NodeFilter.FILTER_REJECT;if(!state.ignoreGroupper){var groupper=void 0,mover=void 0;groupper=ctx.groupper,mover=ctx.mover;var result,isGroupperFirst=ctx.isGroupperFirst;if(groupper&&isGroupperFirst?mover=void 0:mover&&!isGroupperFirst&&(groupper=void 0),groupper)if(void 0!==(result=groupper.acceptElement(element,state)))return result;if(mover)if(void 0!==(result=mover.acceptElement(element,state)))return result}return state.acceptCondition(element)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP},FocusableAPI}(),Keys_Tab=9,Keys_Enter=13,Keys_Esc=27,Keys_PageUp=33,Keys_PageDown=34,Keys_End=35,Keys_Home=36,Keys_Left=37,Keys_Up=38,Keys_Right=39,Keys_Down=40,tabster_esm_FocusedElementState=function(_super){function FocusedElementState(tabster,getWindow){var _this=_super.call(this)||this;return _this._init=function(){_this._initTimer=void 0;var win=_this._win();win.document.addEventListener("keyborg:focusin",_this._onFocusIn,!0),win.document.addEventListener("focusout",_this._onFocusOut,!0),win.addEventListener("keydown",_this._onKeyDown,!0)},_this._onFocusIn=function(e){_this._setFocusedElement(e.target,e.details.relatedTarget||void 0,e.details.isFocusedProgrammatically)},_this._onFocusOut=function(e){_this._setFocusedElement(void 0,e.relatedTarget||void 0)},_this._onKeyDown=function(e){var _a;if(e.keyCode===Keys_Tab){var curElement=_this.getVal();if(curElement&&curElement.ownerDocument&&"true"!==curElement.contentEditable){var ctx=RootAPI.getTabsterContext(_this._tabster,curElement,{checkRtl:!0});if(ctx){var isPrev=e.shiftKey,next=FocusedElementState.findNextTabbable(_this._tabster,ctx,curElement,isPrev);if(next){var uncontrolled=next.uncontrolled;if(uncontrolled)ctx.uncontrolled||_this._moveToUncontrolled(uncontrolled,isPrev);else{var nextElement=next.element;if(ctx.modalizer){var nextElementCtx=nextElement&&RootAPI.getTabsterContext(_this._tabster,nextElement);if((!nextElementCtx||ctx.root.uid!==nextElementCtx.root.uid||!(null===(_a=nextElementCtx.modalizer)||void 0===_a?void 0:_a.isActive()))&&ctx.modalizer.onBeforeFocusOut())return void e.preventDefault()}nextElement?"IFRAME"!==nextElement.tagName&&(e.preventDefault(),nativeFocus(nextElement)):ctx.root.moveOutWithDefaultAction(isPrev)}}}}}},_this._validateFocusedElement=function(element){},_this._tabster=tabster,_this._win=getWindow,_this._initTimer=getWindow().setTimeout(_this._init,0),_this}return Object(tslib_es6.c)(FocusedElementState,_super),FocusedElementState.prototype.dispose=function(){_super.prototype.dispose.call(this);var win=this._win();this._initTimer&&(win.clearTimeout(this._initTimer),this._initTimer=void 0),win.document.removeEventListener("keyborg:focusin",this._onFocusIn,!0),win.document.removeEventListener("focusout",this._onFocusOut,!0),win.removeEventListener("keydown",this._onKeyDown,!0),delete FocusedElementState._lastResetElement,delete this._nextVal,delete this._lastVal},FocusedElementState.dispose=function(instance){instance.dispose()},FocusedElementState.forgetMemorized=function(instance,parent){var _a,_b,wel=FocusedElementState._lastResetElement,el=wel&&wel.get();el&&parent.contains(el)&&delete FocusedElementState._lastResetElement,(el=null===(_b=null===(_a=instance._nextVal)||void 0===_a?void 0:_a.element)||void 0===_b?void 0:_b.get())&&parent.contains(el)&&delete instance._nextVal,(el=(wel=instance._lastVal)&&wel.get())&&parent.contains(el)&&delete instance._lastVal},FocusedElementState.prototype.getFocusedElement=function(){return this.getVal()},FocusedElementState.prototype.getLastFocusedElement=function(){var _a,el=null===(_a=this._lastVal)||void 0===_a?void 0:_a.get();return(!el||el&&!documentContains(el.ownerDocument,el))&&(this._lastVal=el=void 0),el},FocusedElementState.prototype.focus=function(element,noFocusedProgrammaticallyFlag,noAccessibleCheck){return!!this._tabster.focusable.isFocusable(element,noFocusedProgrammaticallyFlag,!1,noAccessibleCheck)&&(element.focus(),!0)},FocusedElementState.prototype.focusDefault=function(container){var el=this._tabster.focusable.findDefault({container:container});return!!el&&(this._tabster.focusedElement.focus(el),!0)},FocusedElementState.prototype.focusFirst=function(props){var toFocus,container=props.container;if(container){var ctx=RootAPI.getTabsterContext(this._tabster,container,{checkRtl:!0});if(ctx){var next=FocusedElementState.findNextTabbable(this._tabster,ctx,container);next&&!next.uncontrolled&&(toFocus=next.element)}}return toFocus||(toFocus=this._tabster.focusable.findFirst(props))||(toFocus=this._tabster.focusable.findFirst(Object(tslib_es6.a)(Object(tslib_es6.a)({},props),{ignoreUncontrolled:!0,ignoreAccessibiliy:!0}))),!!toFocus&&(this.focus(toFocus,!1,!0),!0)},FocusedElementState.prototype.focusLast=function(props){var toFocus,container=props.container;if(container){var ctx=RootAPI.getTabsterContext(this._tabster,container,{checkRtl:!0});if(ctx){var next=FocusedElementState.findNextTabbable(this._tabster,ctx,getLastChild(container),!0);next&&!next.uncontrolled&&(toFocus=next.element)}}return toFocus||(toFocus=this._tabster.focusable.findLast(props))||(toFocus=this._tabster.focusable.findLast(Object(tslib_es6.a)(Object(tslib_es6.a)({},props),{ignoreUncontrolled:!0,ignoreAccessibiliy:!0}))),!!toFocus&&(this.focus(toFocus,!1,!0),!0)},FocusedElementState.prototype.resetFocus=function(container){if(!this._tabster.focusable.isVisible(container))return!1;if(this._tabster.focusable.isFocusable(container,!0,!0,!0))this.focus(container);else{var prevTabIndex=container.getAttribute("tabindex"),prevAriaHidden=container.getAttribute("aria-hidden");container.tabIndex=-1,container.setAttribute("aria-hidden","true"),FocusedElementState._lastResetElement=new WeakHTMLElement(this._win,container),this.focus(container,!0,!0),this._setOrRemoveAttribute(container,"tabindex",prevTabIndex),this._setOrRemoveAttribute(container,"aria-hidden",prevAriaHidden)}return!0},FocusedElementState.prototype._setOrRemoveAttribute=function(element,name,value){null===value?element.removeAttribute(name):element.setAttribute(name,value)},FocusedElementState.prototype._setFocusedElement=function(element,relatedTarget,isFocusedProgrammatically){var _a;if(!this._tabster._noop){var details={relatedTarget:relatedTarget};if(element){var lastResetElement=null===(_a=FocusedElementState._lastResetElement)||void 0===_a?void 0:_a.get();if(FocusedElementState._lastResetElement=void 0,lastResetElement===element||shouldIgnoreFocus(element))return;details.isFocusedProgrammatically=isFocusedProgrammatically}var nextVal=this._nextVal={element:element?new WeakHTMLElement(this._win,element):void 0,details:details};element&&element!==this._val&&this._validateFocusedElement(element),this._nextVal===nextVal&&this.setVal(element,details),this._nextVal=void 0}},FocusedElementState.prototype.setVal=function(val,details){_super.prototype.setVal.call(this,val,details),val&&(this._lastVal=new WeakHTMLElement(this._win,val))},FocusedElementState.findNextTabbable=function(tabster,ctx,from,prev){var current,next=null;if(from)current=from;else{var container=ctx.root.getElement();if(!container)return null;current=getLastChild(container)||container}if(ctx.groupper&&ctx.mover)ctx.isGroupperFirst?null===(next=ctx.groupper.findNextTabbable(current,prev))&&(next=ctx.mover.findNextTabbable(current,prev)):null===(next=ctx.mover.findNextTabbable(current,prev))&&(next=ctx.groupper.findNextTabbable(current,prev));else if(ctx.groupper)next=ctx.groupper.findNextTabbable(current,prev);else if(ctx.mover)next=ctx.mover.findNextTabbable(current,prev);else{var uncontrolled_1,onUncontrolled=function onUncontrolled(el){uncontrolled_1=el};next={element:prev?tabster.focusable.findPrev({currentElement:current,onUncontrolled:onUncontrolled}):tabster.focusable.findNext({currentElement:current,onUncontrolled:onUncontrolled}),uncontrolled:uncontrolled_1}}return next},FocusedElementState.prototype._moveToUncontrolled=function(uncontrolled,isPrev){var input=new DummyInput(this._win,!0,(function(){}),(function(){}),void 0).input;if(input){var parent_1=uncontrolled.parentElement;parent_1&&(parent_1.insertBefore(input,isPrev?uncontrolled.nextElementSibling:uncontrolled),nativeFocus(input))}},FocusedElementState}(Subscribable),tabster_esm_Groupper=function(_super){function Groupper(tabster,element,props){var _this=_super.call(this,tabster,element,props)||this;return _this._shouldTabInside=!1,_this.makeTabbable(!1),_this}return Object(tslib_es6.c)(Groupper,_super),Groupper.prototype.dispose=function(){this._element.get();delete this._first},Groupper.prototype.findNextTabbable=function(current,prev){var container=this.getElement();if(!container||!container.contains(current))return null;var uncontrolled,tabster=this._tabster,next=null,onUncontrolled=function onUncontrolled(el){uncontrolled=el};if(this._shouldTabInside){var groupperFirstFocusable=this.getFirst();if(groupperFirstFocusable){var findSiblingFrom=prev?groupperFirstFocusable:getLastChild(groupperFirstFocusable),actualContainer=void 0;if(findSiblingFrom)actualContainer=(prev?tabster.focusable.findPrev({container:container,currentElement:findSiblingFrom,ignoreUncontrolled:!0}):tabster.focusable.findNext({container:container,currentElement:findSiblingFrom,ignoreUncontrolled:!0}))?container:groupperFirstFocusable;else actualContainer=container;actualContainer&&(next=prev?tabster.focusable.findPrev({container:actualContainer,currentElement:current,onUncontrolled:onUncontrolled}):tabster.focusable.findNext({container:actualContainer,currentElement:current,onUncontrolled:onUncontrolled}),uncontrolled||next||this._props.tabbability!==GroupperTabbabilities.LimitedTrapFocus||(next=prev?tabster.focusable.findLast({container:actualContainer}):tabster.focusable.findFirst({container:actualContainer})))}}if(null===next){var parentElement=container.parentElement;if(parentElement){var parentCtx=RootAPI.getTabsterContext(tabster,parentElement);if(parentCtx)return tabster_esm_FocusedElementState.findNextTabbable(tabster,parentCtx,current,prev)}}return{element:next,uncontrolled:uncontrolled}},Groupper.prototype.makeTabbable=function(isTabbable){this._shouldTabInside=isTabbable},Groupper.prototype.shouldTabInside=function(){return this._shouldTabInside},Groupper.prototype.isActive=function(){for(var _a,element=this.getElement()||null,isParentActive=!0,e=null==element?void 0:element.parentElement;e;e=e.parentElement){var g=null===(_a=getTabsterOnElement(this._tabster,e))||void 0===_a?void 0:_a.groupper;g&&(g._shouldTabInside||(isParentActive=!1))}return isParentActive?!!this._props.tabbability&&this._shouldTabInside:void 0},Groupper.prototype.getFirst=function(){var _a,first,groupperElement=this.getElement();return groupperElement&&((first=null===(_a=this._first)||void 0===_a?void 0:_a.get())||(first=(this._tabster.focusable.isFocusable(groupperElement)?groupperElement:this._tabster.focusable.findFirst({container:groupperElement,ignoreUncontrolled:!0}))||void 0)),first},Groupper.prototype.setFirst=function(element){element?this._first=new WeakHTMLElement(this._tabster.getWindow,element):delete this._first},Groupper.prototype.acceptElement=function(element,state){var grouppers=state.grouppers,container=state.container,cached=grouppers[this.id];if(!cached){var isActive=this.isActive(),groupperElement=this.getElement();if(groupperElement){var isInside=groupperElement!==container&&container.contains(groupperElement);if(cached=grouppers[this.id]={isInside:isInside,isActive:isActive},isInside&&!0!==isActive){var first=this.getFirst();if(first&&state.acceptCondition(first)){var focused=this._tabster.focusedElement.getFocusedElement();cached.first=first,focused&&this.setFirst(groupperElement.contains(focused)?void 0:first)}}}}if(cached.isInside){if(void 0===cached.isActive)return NodeFilter.FILTER_REJECT;if(!1===cached.isActive)return cached.first===element?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}},Groupper}(tabster_esm_TabsterPart),tabster_esm_GroupperAPI=function(){function GroupperAPI(tabster,getWindow){var _this=this;this._current={},this._init=function(){_this._initTimer=void 0;var win=_this._win();_this._tabster.focusedElement.subscribe(_this._onFocus),win.document.addEventListener("mousedown",_this._onMouseDown,!0),win.addEventListener("keydown",_this._onKeyDown,!0)},this._onFocus=function(element){element&&_this._updateCurrent(element,!1,!0)},this._onMouseDown=function(e){e.target&&_this._updateCurrent(e.target,!0)},this._onKeyDown=function(e){var _a,_b;if(e.keyCode===Keys_Enter||e.keyCode===Keys_Esc){var element=_this._tabster.focusedElement.getFocusedElement();if(element){var groupper=null===(_a=RootAPI.getTabsterContext(_this._tabster,element))||void 0===_a?void 0:_a.groupper;if(groupper){var next=void 0;if(e.keyCode===Keys_Enter){var groupperFirstFocusable=groupper.getFirst();if(groupperFirstFocusable!==element||groupper.isActive())return;(next=_this._tabster.focusable.findFirst({container:groupperFirstFocusable,ignoreGroupper:!0}))&&_this._updateCurrent(next)}else if(e.keyCode===Keys_Esc)for(var e_1=element;e_1;e_1=e_1.parentElement){var g=null===(_b=getTabsterOnElement(_this._tabster,e_1))||void 0===_b?void 0:_b.groupper;if(g&&(g.isActive()||!g.getProps().tabbability)&&(g.makeTabbable(!1),next=g.getFirst()))break}next&&(e.preventDefault(),nativeFocus(next))}}}},this._tabster=tabster,this._win=getWindow,this._initTimer=getWindow().setTimeout(this._init,0)}return GroupperAPI.prototype.dispose=function(){var win=this._win();this._current={},this._initTimer&&(win.clearTimeout(this._initTimer),this._initTimer=void 0),this._tabster.focusedElement.unsubscribe(this._onFocus),win.document.removeEventListener("mousedown",this._onMouseDown,!0),win.removeEventListener("keydown",this._onKeyDown,!0)},GroupperAPI.dispose=function(instance){instance.dispose()},GroupperAPI.prototype.forgetCurrentGrouppers=function(){this._current={}},GroupperAPI.prototype._updateCurrent=function(element,includeTarget,checkTarget){for(var _a,newIds={},isTarget=!0,el=element;el;el=el.parentElement){(groupper=null===(_a=getTabsterOnElement(this._tabster,el))||void 0===_a?void 0:_a.groupper)&&(newIds[groupper.id]=!0,!isTarget||!checkTarget||groupper.shouldTabInside()||groupper.getProps().tabbability&&(el===element||!this._tabster.focusable.isFocusable(el)&&element===groupper.getFirst())||(isTarget=!1),!includeTarget&&isTarget||(this._current[groupper.id]=groupper,groupper.makeTabbable(!0)),isTarget=!1)}for(var _i=0,_b=Object.keys(this._current);_i<_b.length;_i++){var groupper,id=_b[_i];(groupper=this._current[id]).id in newIds||(groupper.makeTabbable(!1),groupper.setFirst(void 0),delete this._current[id])}},GroupperAPI.createGroupper=function(tabster,element,props){return new tabster_esm_Groupper(tabster,element,props)},GroupperAPI}();var _lastInternalId=0;var tabster_esm_Modalizer=function(_super){function Modalizer(tabster,element,onDispose,props){var _this=_super.call(this,tabster,element,props)||this;_this._isFocused=!1,_this.internalId="ml"+ ++_lastInternalId,_this.userId=props.id,_this._onDispose=onDispose;var parentElement=element.parentElement;return _this._modalizerParent=parentElement?new WeakHTMLElement(tabster.getWindow,parentElement):null,_this._setAccessibilityProps(),_this}return Object(tslib_es6.c)(Modalizer,_super),Modalizer.prototype.setProps=function(props){props.id&&(this.userId=props.id),this._props=Object(tslib_es6.a)({},props),this._setAccessibilityProps()},Modalizer.prototype.dispose=function(){this._onDispose(this),this._remove()},Modalizer.prototype.setActive=function(active){var _a,_b,_c,_this=this;if(active!==this._isActive){this._isActive=active;var targetDocument=(null===(_a=this._element.get())||void 0===_a?void 0:_a.ownerDocument)||(null===(_c=null===(_b=this._modalizerParent)||void 0===_b?void 0:_b.get())||void 0===_c?void 0:_c.ownerDocument);targetDocument||(targetDocument=this._tabster.getWindow().document);var ariaHiddenWalker=createElementTreeWalker(targetDocument,targetDocument.body,(function(el){var _a;if(_this._props.isOthersAccessible)return NodeFilter.FILTER_REJECT;var modalizerRoot=_this._element.get(),modalizerParent=null===(_a=_this._modalizerParent)||void 0===_a?void 0:_a.get(),isModalizerElement=modalizerRoot===el,containsModalizerRoot=!!el.contains(modalizerRoot||null),containsModalizerParent=!!el.contains(modalizerParent||null);if(isModalizerElement)return NodeFilter.FILTER_REJECT;if(containsModalizerRoot||containsModalizerParent)return NodeFilter.FILTER_SKIP;!function augmentAttribute(tabster,element,name,value){var entry=tabster.storageEntry(element,!0);if(!entry.aug){if(void 0===value)return;entry.aug={}}if(void 0===value){if(name in entry.aug){var origVal=entry.aug[name];delete entry.aug[name],null===origVal?element.removeAttribute(name):element.setAttribute(name,origVal)}}else name in entry.aug||(entry.aug[name]=element.getAttribute(name)),null===value?element.removeAttribute(name):element.setAttribute(name,value);void 0===value&&0===Object.keys(entry.aug).length&&(delete entry.aug,tabster.storageEntry(element,!1))}(_this._tabster,el,"aria-hidden",active?"true":void 0);var modalizerRootOnPage=modalizerRoot!==(null==modalizerRoot?void 0:modalizerRoot.ownerDocument.body)&&(null==modalizerRoot?void 0:modalizerRoot.ownerDocument.body.contains(modalizerRoot));return modalizerParent!==(null==modalizerParent?void 0:modalizerParent.ownerDocument.body)&&(null==modalizerParent?void 0:modalizerParent.ownerDocument.body.contains(modalizerParent))||modalizerRootOnPage?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP}));if(ariaHiddenWalker)for(;ariaHiddenWalker.nextNode(););}},Modalizer.prototype.isActive=function(){return!!this._isActive},Modalizer.prototype.contains=function(element){var _a;return!!(null===(_a=this.getElement())||void 0===_a?void 0:_a.contains(element))},Modalizer.prototype.onBeforeFocusOut=function(){var element=this.getElement();return!!element&&!triggerEvent(element,"tabster:modalizer",{eventName:"beforefocusout"})},Modalizer.prototype._remove=function(){0},Modalizer.prototype._setAccessibilityProps=function(){},Modalizer}(tabster_esm_TabsterPart),ModalizerAPI=function(){function ModalizerAPI(tabster){var _this=this;this._init=function(){_this._initTimer=void 0,_this._tabster.focusedElement.subscribe(_this._onFocus)},this._onModalizerDispose=function(modalizer){modalizer.setActive(!1),_this._curModalizer===modalizer&&(_this._curModalizer=void 0),delete _this._modalizers[modalizer.userId]},this.updateModalizer=function(modalizer,removed){removed&&(modalizer.isActive()&&modalizer.setActive(!1),delete _this._modalizers[modalizer.userId],_this._curModalizer===modalizer&&(_this._curModalizer=void 0))},this._onFocus=function(focusedElement,details){var _a,_b,_c,ctx=focusedElement&&RootAPI.getTabsterContext(_this._tabster,focusedElement);if(ctx&&focusedElement){_this._focusOutTimer&&(_this._win().clearTimeout(_this._focusOutTimer),_this._focusOutTimer=void 0);var modalizer=null==ctx?void 0:ctx.modalizer;if(modalizer!==_this._curModalizer)if(details.isFocusedProgrammatically&&!(null===(_a=_this._curModalizer)||void 0===_a?void 0:_a.contains(focusedElement)))null===(_b=_this._curModalizer)||void 0===_b||_b.setActive(!1),_this._curModalizer=void 0,modalizer&&(_this._curModalizer=modalizer,_this._curModalizer.setActive(!0));else if(!(null===(_c=_this._curModalizer)||void 0===_c?void 0:_c.getProps().isOthersAccessible)){var win=_this._win();win.clearTimeout(_this._restoreModalizerFocusTimer),_this._restoreModalizerFocusTimer=win.setTimeout((function(){return _this._restoreModalizerFocus(focusedElement)}),100)}}},this._tabster=tabster,this._win=tabster.getWindow,this._initTimer=this._win().setTimeout(this._init,0),this._modalizers={}}return ModalizerAPI.prototype.dispose=function(){var _this=this,win=this._win();this._initTimer&&(win.clearTimeout(this._initTimer),this._initTimer=void 0),win.clearTimeout(this._restoreModalizerFocusTimer),win.clearTimeout(this._focusOutTimer),Object.keys(this._modalizers).forEach((function(modalizerId){_this._modalizers[modalizerId]&&(_this._modalizers[modalizerId].dispose(),delete _this._modalizers[modalizerId])})),this._tabster.focusedElement.unsubscribe(this._onFocus),delete this._curModalizer},ModalizerAPI.dispose=function(instance){instance.dispose()},ModalizerAPI.prototype.focus=function(elementFromModalizer,noFocusFirst,noFocusDefault){var ctx=RootAPI.getTabsterContext(this._tabster,elementFromModalizer);if(ctx&&ctx.modalizer){this._curModalizer=ctx.modalizer,this._curModalizer.setActive(!0);var props=this._curModalizer.getProps(),modalizerRoot=this._curModalizer.getElement();if(modalizerRoot){if(void 0===noFocusFirst&&(noFocusFirst=props.isNoFocusFirst),!noFocusFirst&&this._tabster.keyboardNavigation.isNavigatingWithKeyboard()&&this._tabster.focusedElement.focusFirst({container:modalizerRoot}))return!0;if(void 0===noFocusDefault&&(noFocusDefault=props.isNoFocusDefault),!noFocusDefault&&this._tabster.focusedElement.focusDefault(modalizerRoot))return!0;this._tabster.focusedElement.resetFocus(modalizerRoot)}}else 0;return!1},ModalizerAPI.prototype.getActiveModalizer=function(){return this._curModalizer},ModalizerAPI.updateModalizer=function(tabster,modalizer,removed){if(removed&&tabster.modalizer){var self_1=tabster.modalizer;modalizer.isActive()&&modalizer.setActive(!1),delete self_1._modalizers[modalizer.userId],self_1._curModalizer===modalizer&&(self_1._curModalizer=void 0)}},ModalizerAPI.prototype._restoreModalizerFocus=function(outsideElement){if((null==outsideElement?void 0:outsideElement.ownerDocument)&&this._curModalizer){var toFocus=this._tabster.focusable.findFirst({container:this._curModalizer.getElement()});if(toFocus){if(outsideElement.compareDocumentPosition(toFocus)&document.DOCUMENT_POSITION_PRECEDING&&!(toFocus=this._tabster.focusable.findLast({container:outsideElement.ownerDocument.body})))throw new Error("Something went wrong.");this._tabster.focusedElement.focus(toFocus)}else outsideElement.blur()}},ModalizerAPI.createModalizer=function(tabster,element,props){var _a;var self=tabster.modalizer,modalizer=new tabster_esm_Modalizer(tabster,element,self._onModalizerDispose,props);if(self._modalizers[props.id]=modalizer,element.contains(null!==(_a=tabster.focusedElement.getFocusedElement())&&void 0!==_a?_a:null)){var prevModalizer=self._curModalizer;prevModalizer&&prevModalizer.setActive(!1),self._curModalizer=modalizer,self._curModalizer.setActive(!0)}return modalizer},ModalizerAPI}(),_inputSelector=["input","textarea","*[contenteditable]"].join(", "),tabster_esm_Mover=function(_super){function Mover(tabster,element,onDispose,props){var _this=_super.call(this,tabster,element,props)||this;return _this._visible={},_this._prevVisible={},_this._hasFullyVisible=!1,_this._focusables={},_this._domChanged=function(){var _a;_this._domChangedTimer=void 0;var element=_this.getElement();if(element){for(var elements=_this._tabster.focusable.findAll({container:element}),newFocusables={},prevFocusables=_this._focusables,i=0;i<elements.length;i++){var el=elements[i],weakEl=prevFocusables[id=getElementUId(_this._win,el)];weakEl||(weakEl=new WeakHTMLElement(_this._win,el)),newFocusables[id]=weakEl}for(var _i=0,_b=Object.keys(prevFocusables);_i<_b.length;_i++){var id;if(!((id=_b[_i])in newFocusables)){var prevFocusable=prevFocusables[id].get();delete prevFocusables[id],delete _this._visible[id],prevFocusable&&(null===(_a=_this._current)||void 0===_a?void 0:_a.get())===prevFocusable&&_this.setCurrent(void 0)}}_this._focusables=newFocusables,_this.updateVisible(!0)}},_this._win=tabster.getWindow,(_this._props.trackState||_this._props.visibilityAware)&&(_this._observeState(),_this._domChangedTimer=tabster.getWindow().setTimeout(_this._domChanged,0)),_this._onDispose=onDispose,_this}return Object(tslib_es6.c)(Mover,_super),Mover.prototype.dispose=function(){this._onDispose(this),this._focusables={},this._unobserve&&(this._unobserve(),this._unobserve=void 0);var win=this._win();this._updateVisibleTimer&&(win.clearTimeout(this._updateVisibleTimer),this._updateVisibleTimer=void 0),this._domChangedTimer&&(win.clearTimeout(this._domChangedTimer),this._domChangedTimer=void 0),this._onChangeTimer&&(win.clearTimeout(this._onChangeTimer),this._onChangeTimer=void 0)},Mover.prototype.setCurrent=function(element){return this._current=element?new WeakHTMLElement(this._win,element):void 0,(this._props.trackState||this._props.visibilityAware)&&this._processOnChange(),!1},Mover.prototype.getCurrent=function(){var _a;return(null===(_a=this._current)||void 0===_a?void 0:_a.get())||null},Mover.prototype.findNextTabbable=function(current,prev){var container=this.getElement();if(!container||!container.contains(current))return null;var uncontrolled,tabster=this._tabster,focusable=tabster.focusable,next=null,onUncontrolled=function onUncontrolled(el){uncontrolled=el};if(this._props.tabbable&&(next=prev?focusable.findPrev({currentElement:current,container:container,onUncontrolled:onUncontrolled}):focusable.findNext({currentElement:current,container:container,onUncontrolled:onUncontrolled})),null===next){var parentElement=container.parentElement;if(parentElement){var parentCtx=RootAPI.getTabsterContext(tabster,parentElement);if(parentCtx){var from=(prev?container:focusable.findLast({container:container}))||container;return tabster_esm_FocusedElementState.findNextTabbable(tabster,parentCtx,from,prev)}}}return{element:next,uncontrolled:uncontrolled}},Mover.prototype.acceptElement=function(element,state){var _a,_b,_c=this._props,memorizeCurrent=_c.memorizeCurrent,visibilityAware=_c.visibilityAware;if(memorizeCurrent||visibilityAware){var container=this.getElement();if(container){if(memorizeCurrent){var current=null===(_a=this._current)||void 0===_a?void 0:_a.get();if(current&&state.acceptCondition(current)&&state.from&&!container.contains(state.from))return state.found=!0,state.foundElement=current,NodeFilter.FILTER_ACCEPT}if(visibilityAware&&!container.contains(state.from)){var visible=Object.keys(this._visible),found=void 0;state.isForward||visible.reverse();for(var _i=0,visible_1=visible;_i<visible_1.length;_i++){var id=visible_1[_i],visibility=this._visible[id];if((visibility===Visibilities.Visible||visibility===Visibilities.PartiallyVisible&&(visibilityAware===Visibilities.PartiallyVisible||!this._hasFullyVisible))&&(found=null===(_b=this._focusables[id])||void 0===_b?void 0:_b.get())&&state.acceptCondition(found))return state.found=!0,state.foundElement=found,NodeFilter.FILTER_ACCEPT}}}}},Mover.prototype._observeState=function(){var _this=this,element=this.getElement();if(!this._unobserve&&element&&"undefined"!=typeof MutationObserver){var observer=new MutationObserver((function(mutations){var win=_this._win();_this._domChangedTimer&&win.clearTimeout(_this._domChangedTimer),_this._domChangedTimer=win.setTimeout(_this._domChanged,0)}));observer.observe(element,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["tabindex"]}),this._unobserve=function(){observer.disconnect()}}},Mover.prototype.forceUpdate=function(){this._processOnChange(!0)},Mover.prototype._processOnChange=function(force){var _this=this;if(!this._onChangeTimer||force){var reallyProcessOnChange=function reallyProcessOnChange(){_this._onChangeTimer=void 0;var changed=[];if(_this._current!==_this._prevCurrent&&(changed.push(_this._current),changed.push(_this._prevCurrent),_this._prevCurrent=_this._current),_this._visible!==_this._prevVisible){_this._hasFullyVisible=!1;for(var _i=0,_a=Object.keys(_this._visible);_i<_a.length;_i++){var id=_a[_i],visibility=_this._visible[id];visibility!==_this._prevVisible[id]&&changed.push(_this._focusables[id]),visibility===Visibilities.Visible&&(_this._hasFullyVisible=!0)}for(var _b=0,_c=Object.keys(_this._prevVisible);_b<_c.length;_b++){id=_c[_b];_this._visible[id]!==_this._prevVisible[id]&&changed.push(_this._focusables[id])}_this._prevVisible=_this._visible}for(var processed={},_d=0,changed_1=changed;_d<changed_1.length;_d++){var weak=changed_1[_d],el=null==weak?void 0:weak.get();if((id=el&&getElementUId(_this._win,el))&&!processed[id]&&(processed[id]=!0,_this._focusables[id])){var props=_this._props;if(el&&(void 0!==props.visibilityAware||props.trackState)){var state=_this.getState(el);state&&triggerEvent(el,"tabster:mover",state)}}}};this._onChangeTimer&&this._win().clearTimeout(this._onChangeTimer),force?reallyProcessOnChange():this._onChangeTimer=this._win().setTimeout(reallyProcessOnChange,0)}},Mover.prototype.getState=function(element){var id=getElementUId(this._win,element);if(id in this._visible){var visibility=this._visible[id]||Visibilities.Invisible;return{isCurrent:this._current?this._current.get()===element:void 0,visibility:visibility}}},Mover.prototype.updateVisible=function(updateParents){var _a,_this=this,element=this._element.get();if(!this._updateVisibleTimer&&element){if(updateParents)for(var e=element.parentElement;e;e=e.parentElement){var mover=null===(_a=getTabsterOnElement(this._tabster,e))||void 0===_a?void 0:_a.mover;mover&&mover.updateVisible(!1)}this._updateVisibleTimer=this._win().setTimeout((function(){_this._updateVisibleTimer=void 0;for(var isChanged=!1,visibleMovers={},_i=0,_a=Object.keys(_this._focusables);_i<_a.length;_i++){var id=_a[_i],element_1=_this._focusables[id].get(),visible=element_1?isElementVisibleInContainer(_this._win,element_1,10):Visibilities.Invisible,curIsVisible=_this._visible[id]||Visibilities.Invisible;visible!==Visibilities.Invisible&&(visibleMovers[id]=visible),curIsVisible!==visible&&(isChanged=!0)}isChanged&&(_this._prevVisible=_this._visible,_this._visible=visibleMovers,_this._processOnChange())}),0)}},Mover}(tabster_esm_TabsterPart),tabster_esm_MoverAPI=function(){function MoverAPI(tabster,getWindow){var _this=this;this._scrollTargets=[],this._init=function(){_this._initTimer=void 0;var win=_this._win();win.addEventListener("scroll",_this._onScroll,!0),win.addEventListener("keydown",_this._onKeyDown,!0)},this._onMoverDispose=function(mover){delete _this._movers[mover.id]},this._onFocus=function(e){for(var _a,el=e;el;el=el.parentElement){var mover=null===(_a=getTabsterOnElement(_this._tabster,el))||void 0===_a?void 0:_a.mover;if(mover){mover.setCurrent(e);break}}},this._onScroll=function(e){for(var isKnownTarget=!1,_i=0,_a=_this._scrollTargets;_i<_a.length;_i++){if(_a[_i]===e.target){isKnownTarget=!0;break}}!isKnownTarget&&e.target.contains&&_this._scrollTargets.push(e.target);var win=_this._win();_this._scrollTimer&&win.clearTimeout(_this._scrollTimer),_this._scrollTimer=win.setTimeout((function(){_this._scrollTimer=void 0,_this._updateVisible(_this._scrollTargets),_this._scrollTargets=[]}),200)},this._onKeyDown=function(e){var keyCode=e.keyCode;switch(keyCode){case Keys_Down:case Keys_Right:case Keys_Up:case Keys_Left:case Keys_PageDown:case Keys_PageUp:case Keys_Home:case Keys_End:break;default:return}if(!e.shiftKey){var tabster=_this._tabster,focused=tabster.focusedElement.getFocusedElement();if(focused&&!_this._isIgnoredInput(focused,keyCode)){var ctx=RootAPI.getTabsterContext(tabster,focused,{checkRtl:!0});if(ctx&&ctx.mover&&!(ctx.isGroupperFirst&&ctx.groupper&&ctx.groupper.isActive())){var mover=ctx.mover,container=mover.getElement();if(container){var next,focusable=tabster.focusable,moverProps=mover.getProps(),direction=moverProps.direction||MoverDirections.Both,isBoth=direction===MoverDirections.Both,isVertical=isBoth||direction===MoverDirections.Vertical,isHorizontal=isBoth||direction===MoverDirections.Horizontal,isGrid=direction===MoverDirections.Grid,isCyclic=moverProps.cyclic;if(!moverProps.disableHomeEndKeys||keyCode!==Keys_Home&&keyCode!==Keys_End){if(ctx.isRtl&&(keyCode===Keys_Right?keyCode=Keys_Left:keyCode===Keys_Left&&(keyCode=Keys_Right)),keyCode===Keys_Down&&isVertical||keyCode===Keys_Right&&isHorizontal)!(next=focusable.findNext({currentElement:focused,container:container}))&&isCyclic&&(next=focusable.findFirst({container:container}));else if(keyCode===Keys_Up&&isVertical||keyCode===Keys_Left&&isHorizontal)!(next=focusable.findPrev({currentElement:focused,container:container}))&&isCyclic&&(next=focusable.findLast({container:container}));else if(keyCode===Keys_Home)next=focusable.findFirst({container:container});else if(keyCode===Keys_End)next=focusable.findLast({container:container});else if(keyCode===Keys_PageUp){for(var prevElement=focusable.findPrev({currentElement:focused,container:container}),pageUpElement=null;prevElement;)pageUpElement=prevElement,prevElement=isElementVerticallyVisibleInContainer(_this._win,prevElement)?focusable.findPrev({currentElement:prevElement,container:container}):null;(next=pageUpElement)&&scrollIntoView(_this._win,next,!1)}else if(keyCode===Keys_PageDown){for(var nextElement=focusable.findNext({currentElement:focused,container:container}),pageDownElement=null;nextElement;)pageDownElement=nextElement,nextElement=isElementVerticallyVisibleInContainer(_this._win,nextElement)?focusable.findNext({currentElement:nextElement,container:container}):null;(next=pageDownElement)&&scrollIntoView(_this._win,next,!0)}else if(isGrid){for(var fromRect=focused.getBoundingClientRect(),lastElement=void 0,prevTop=void 0,nextMethod=keyCode===Keys_Down||keyCode===Keys_Right?"findNext":"findPrev",el=focusable[nextMethod]({currentElement:focused,container:container});el;el=focusable[nextMethod]({currentElement:el,container:container})){var rect=el.getBoundingClientRect();if(keyCode===Keys_Up){if(rect.top<fromRect.top){if(void 0===prevTop)prevTop=rect.top;else if(rect.top<prevTop)break;if(rect.left<fromRect.left){next||(next=el);break}next=el}}else if(keyCode===Keys_Down){if(rect.top>fromRect.top){if(void 0===prevTop)prevTop=rect.top;else if(rect.top>prevTop)break;if(rect.left>fromRect.left){next||(next=el);break}next=el}}else if(keyCode===Keys_Left||keyCode===Keys_Right){next=el;break}lastElement=el}next||(next=lastElement)}next&&(e.preventDefault(),e.stopImmediatePropagation(),nativeFocus(next))}}}}}},this._tabster=tabster,this._win=getWindow,this._initTimer=getWindow().setTimeout(this._init,0),this._movers={},tabster.focusedElement.subscribe(this._onFocus)}return MoverAPI.prototype.dispose=function(){var _this=this,win=this._win();this._tabster.focusedElement.unsubscribe(this._onFocus),this._initTimer&&(win.clearTimeout(this._initTimer),this._initTimer=void 0),this._scrollTimer&&(win.clearTimeout(this._scrollTimer),this._scrollTimer=void 0),win.removeEventListener("scroll",this._onScroll,!0),this._scrollTargets=[],win.removeEventListener("keydown",this._onKeyDown,!0),Object.keys(this._movers).forEach((function(moverId){_this._movers[moverId]&&(_this._movers[moverId].dispose(),delete _this._movers[moverId])}))},MoverAPI.dispose=function(instance){instance.dispose()},MoverAPI.prototype._updateVisible=function(scrolled){for(var containers={},_i=0,scrolled_1=scrolled;_i<scrolled_1.length;_i++)for(var s=scrolled_1[_i],_a=0,_b=Object.keys(this._movers);_a<_b.length;_a++){var id=_b[_a],container=this._movers[id],containerElement=container.getElement();containerElement&&s.contains(containerElement)&&(containers[container.id]=container)}for(var _c=0,_d=Object.keys(containers);_c<_d.length;_c++){containers[id=_d[_c]].updateVisible(!1)}},MoverAPI.prototype._isIgnoredInput=function(element,keyCode){if(matchesSelector(element,_inputSelector)&&("INPUT"===element.tagName||"TEXTAREA"===element.tagName)){var selectionStart=element.selectionStart||0;if(selectionStart!==(element.selectionEnd||0))return!0;if(selectionStart>0&&(keyCode===Keys_Left||keyCode===Keys_Up||keyCode===Keys_Home))return!0;if(selectionStart<(element.value||"").length&&(keyCode===Keys_Right||keyCode===Keys_Down||keyCode===Keys_End))return!0}return!1},MoverAPI.createMover=function(tabster,element,props){var self=tabster.mover,newMover=new tabster_esm_Mover(tabster,element,self._onMoverDispose,props);return self._movers[newMover.id]=newMover,newMover},MoverAPI}();"undefined"!=typeof document&&("onfullscreenchange"in document?"fullscreenchange":"onwebkitfullscreenchange"in document?"webkitfullscreenchange":"onmozfullscreenchange"in document?"mozfullscreenchange":"onmsfullscreenchange"in document&&"msfullscreenchange");var UncontrolledAPI=function(){return function UncontrolledAPI(tabster){}}(),Tabster=function(){function Tabster(win,props){var _this=this;this._forgetMemorizedElements=[],this._version="1.0.1",this._noop=!1,this.getWindow=function(){if(!_this._win)throw new Error("Using disposed Tabster.");return _this._win},this._storage=function createWeakMap(win){var ctx=win.__tabsterInstanceContext;return new((null==ctx?void 0:ctx.basics.WeakMap)||WeakMap)}(win),this._win=win;var getWindow=this.getWindow;this.keyboardNavigation=new tabster_esm_KeyboardNavigationState(getWindow),this.focusedElement=new tabster_esm_FocusedElementState(this,getWindow),this.focusable=new tabster_esm_FocusableAPI(this,getWindow),this.root=new RootAPI(this,(function(){var _a;null===(_a=_this.groupper)||void 0===_a||_a.forgetCurrentGrouppers()}),null==props?void 0:props.autoRoot),this.createRoot=RootAPI.createRoot,this.updateRoot=function(root,removed){RootAPI.onRoot(_this.root,root,removed)},this.uncontrolled=new UncontrolledAPI(this),this.internal={stopObserver:function stopObserver(){_this._unobserve&&(_this._unobserve(),delete _this._unobserve)},resumeObserver:function resumeObserver(syncState){if(!_this._unobserve){var doc=getWindow().document;_this._unobserve=function observeMutations(doc,tabster,updateTabsterByAttribute,syncState){if("undefined"==typeof MutationObserver)return function(){};var elementByUId,getWindow=tabster.getWindow;function updateTabsterElements(node,removed){elementByUId||(elementByUId=getInstanceContext(getWindow).elementByUId),processNode(node,removed);var walker=createElementTreeWalker(doc,node,(function(element){return processNode(element,removed)}));if(walker)for(;walker.nextNode(););}function processNode(element,removed){var _a,_b;if(!element.getAttribute)return NodeFilter.FILTER_SKIP;var uid=element.__tabsterElementUID;return uid&&(removed?delete elementByUId[uid]:null!==(_a=(_b=elementByUId)[uid])&&void 0!==_a||(_b[uid]=new WeakHTMLElement(getWindow,element))),(getTabsterOnElement(tabster,element)||element.hasAttribute("data-tabster"))&&updateTabsterByAttribute(tabster,element,removed),NodeFilter.FILTER_SKIP}var observer=new MutationObserver((function onMutation(mutations){for(var _i=0,mutations_1=mutations;_i<mutations_1.length;_i++){var mutation=mutations_1[_i],target=mutation.target,removed=mutation.removedNodes,added=mutation.addedNodes;if("attributes"===mutation.type)"data-tabster"===mutation.attributeName&&updateTabsterByAttribute(tabster,target);else{for(var i=0;i<removed.length;i++)updateTabsterElements(removed[i],!0);for(i=0;i<added.length;i++)updateTabsterElements(added[i])}}}));return syncState&&updateTabsterElements(getWindow().document.body),observer.observe(doc,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["data-tabster"]}),function(){observer.disconnect()}}(doc,_this,updateTabsterByAttribute,syncState)}}},this.internal.resumeObserver(!1),startFakeWeakRefsCleanup(getWindow)}return Tabster.prototype.dispose=function(){this.internal.stopObserver();var win=this._win;this._forgetMemorizedElements=[],win&&this._forgetMemorizedTimer&&(win.clearTimeout(this._forgetMemorizedTimer),delete this._forgetMemorizedTimer);for(var disposeParts={outlineDispose:["outline"],crossOriginDispose:["crossOrigin"],deloserDispose:["deloser","createDeloser"],groupperDispose:["groupper","createGroupper"],moverDispose:["mover","createMover"],modalizerDispose:["modalizer","createModalizer","updateModalizer"],observedElementDispose:["observedElement","updateObserved"]},_i=0,_a=Object.keys(disposeParts);_i<_a.length;_i++){var key=_a[_i],disposeFunc=this[key];if(disposeFunc){disposeFunc();for(var _b=0,_c=disposeParts[key];_b<_c.length;_b++){var partKey=_c[_b];this[partKey]&&delete this[partKey]}delete this[key]}}tabster_esm_KeyboardNavigationState.dispose(this.keyboardNavigation),tabster_esm_FocusableAPI.dispose(this.focusable),tabster_esm_FocusedElementState.dispose(this.focusedElement),RootAPI.dispose(this.root),function stopFakeWeakRefsCleanupAndClearStorage(getWindow){var context=getInstanceContext(getWindow);context.fakeWeakRefsStarted=!1,context.fakeWeakRefsTimer&&(getWindow().clearTimeout(context.fakeWeakRefsTimer),context.fakeWeakRefsTimer=void 0,context.fakeWeakRefs=[])}(this.getWindow),clearElementCache(this.getWindow),this._storage=new WeakMap,win&&(!function disposeInstanceContext(win){var ctx=win.__tabsterInstanceContext;ctx&&(ctx.elementByUId={},delete ctx.WeakRef,ctx.containerBoundingRectCache={},ctx.containerBoundingRectCacheTimer&&win.clearTimeout(ctx.containerBoundingRectCacheTimer),ctx.fakeWeakRefsTimer&&win.clearTimeout(ctx.fakeWeakRefsTimer),ctx.fakeWeakRefs=[],delete win.__tabsterInstanceContext)}(win),delete win.__tabsterInstance,delete this._win)},Tabster.dispose=function(instance){instance.dispose()},Tabster.prototype.storageEntry=function(element,addremove){var storage=this._storage,entry=storage.get(element);return entry?!1===addremove&&0===Object.keys(entry).length&&storage.delete(element):!0===addremove&&(entry={},storage.set(element,entry)),entry},Tabster.forceCleanup=function(tabster){tabster._win&&(tabster._forgetMemorizedElements.push(tabster._win.document.body),tabster._forgetMemorizedTimer||(tabster._forgetMemorizedTimer=tabster._win.setTimeout((function(){delete tabster._forgetMemorizedTimer;for(var el=tabster._forgetMemorizedElements.shift();el;el=tabster._forgetMemorizedElements.shift())clearElementCache(tabster.getWindow,el),tabster_esm_FocusedElementState.forgetMemorized(tabster.focusedElement,el)}),0),cleanupFakeWeakRefs(tabster.getWindow,!0)))},Tabster}();function createTabster(win,props){var existingAh=getCurrentTabster(win);if(existingAh)return existingAh;var tabster=new Tabster(win,props);return win.__tabsterInstance=tabster,tabster}function getGroupper(tabster){var tabsterInternal=tabster;if(!tabsterInternal.groupper){var groupper_1=new tabster_esm_GroupperAPI(tabster,tabsterInternal.getWindow);tabsterInternal.groupper=groupper_1,tabsterInternal.createGroupper=tabster_esm_GroupperAPI.createGroupper,tabsterInternal.groupperDispose=function(){tabster_esm_GroupperAPI.dispose(groupper_1)}}return tabsterInternal.groupper}function getMover(tabster){var tabsterInternal=tabster;if(!tabsterInternal.mover){var mover_1=new tabster_esm_MoverAPI(tabster,tabsterInternal.getWindow);tabsterInternal.mover=mover_1,tabsterInternal.createMover=tabster_esm_MoverAPI.createMover,tabsterInternal.moverDispose=function(){tabster_esm_MoverAPI.dispose(mover_1)}}return tabsterInternal.mover}function getDeloser(tabster,props){var tabsterInternal=tabster;if(!tabsterInternal.deloser){var deloser_1=new tabster_esm_DeloserAPI(tabster,props);tabsterInternal.deloser=deloser_1,tabsterInternal.createDeloser=tabster_esm_DeloserAPI.createDeloser,tabsterInternal.deloserDispose=function(){tabster_esm_DeloserAPI.dispose(deloser_1)}}return tabsterInternal.deloser}function getModalizer(tabster){var tabsterInternal=tabster;if(!tabsterInternal.modalizer){var modalizer_1=new ModalizerAPI(tabster);tabsterInternal.modalizer=modalizer_1,tabsterInternal.createModalizer=ModalizerAPI.createModalizer,tabsterInternal.updateModalizer=function(modalizer,removed){ModalizerAPI.updateModalizer(tabsterInternal,modalizer,removed)},tabsterInternal.modalizerDispose=function(){ModalizerAPI.dispose(modalizer_1)}}return tabsterInternal.modalizer}function disposeTabster(tabster){Tabster.dispose(tabster)}function getTabsterAttribute(props,plain){var _a,attr=JSON.stringify(props);return!0===plain?attr:((_a={})["data-tabster"]=attr,_a)}function getCurrentTabster(win){return win.__tabsterInstance}},413:function(module,exports){},503:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(272)},691:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(272).configure)([__webpack_require__(692),__webpack_require__(693)],module,!1)}).call(this,__webpack_require__(219)(module))},692:function(module,exports){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,module.exports=webpackEmptyContext,webpackEmptyContext.id=692},693:function(module,exports,__webpack_require__){var map={"./Focusable.stories.tsx":694,"./Groupper.stories.tsx":697,"./KeyboardNavigationState.stories.tsx":695,"./Modalizer.stories.tsx":699,"./Mover.stories.tsx":696};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=693},694:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"IgnoreAriaDisabled",(function(){return IgnoreAriaDisabled}));__webpack_require__(39);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),tabster__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0);__webpack_exports__.default={title:"Focusable"};var IgnoreAriaDisabled=function IgnoreAriaDisabled(){var ref=react__WEBPACK_IMPORTED_MODULE_1__.useRef(null),tabster=Object(tabster__WEBPACK_IMPORTED_MODULE_2__.d)(window);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{onClick:function onClick(){var _tabster$focusable$fi;console.log(null==tabster?void 0:tabster.focusable.findNext(ref.current)),null==tabster||null===(_tabster$focusable$fi=tabster.focusable.findNext(ref.current,void 0,!0))||void 0===_tabster$focusable$fi||_tabster$focusable$fi.focus()},ref:ref,children:"Focus aria disabled element"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",Object.assign({"aria-disabled":!0,tabIndex:-1},Object(tabster__WEBPACK_IMPORTED_MODULE_2__.i)({focusable:{ignoreAriaDisabled:!0}}),{children:"aria-disabled element"}))]})};IgnoreAriaDisabled.displayName="IgnoreAriaDisabled"},695:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"KeyboardNavigationState",(function(){return KeyboardNavigationState}));__webpack_require__(27),__webpack_require__(38),__webpack_require__(24),__webpack_require__(42),__webpack_require__(31),__webpack_require__(26),__webpack_require__(30),__webpack_require__(40),__webpack_require__(34),__webpack_require__(60);var react__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(3),tabster__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(0);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={title:"KeyboardNavigationState"};var KeyboardNavigationState=function KeyboardNavigationState(){var _React$useState2=_slicedToArray(react__WEBPACK_IMPORTED_MODULE_10__.useState("undetermined"),2),message=_React$useState2[0],setMessage=_React$useState2[1],onFocus=function onFocus(){var tabster=Object(tabster__WEBPACK_IMPORTED_MODULE_11__.d)(window),isKeyboard=null==tabster?void 0:tabster.keyboardNavigation.isNavigatingWithKeyboard();setMessage(isKeyboard?"keyboard":"mouse")};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)("div",{children:["Focused with: ",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("strong",{children:message})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("button",{onFocus:onFocus,children:"Click or use keyboard"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("button",{onFocus:onFocus,children:"Click or use keyboard"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("button",{onFocus:onFocus,children:"Click or use keyboard"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)("button",{onFocus:onFocus,children:"Click or use keyboard"})]})}},696:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ArrowNavigationVertical",(function(){return ArrowNavigationVertical})),__webpack_require__.d(__webpack_exports__,"ArrowNavigationHorizontal",(function(){return ArrowNavigationHorizontal})),__webpack_require__.d(__webpack_exports__,"ArrowNavigationHorizontalRtl",(function(){return ArrowNavigationHorizontalRtl})),__webpack_require__.d(__webpack_exports__,"ArrowNavigationCircular",(function(){return ArrowNavigationCircular})),__webpack_require__.d(__webpack_exports__,"NestedMovers",(function(){return NestedMovers}));__webpack_require__(39),__webpack_require__(3);var tabster__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0);__webpack_exports__.default={title:"Mover"};var Collection=function Collection(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"A"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"bunch"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"of"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"buttons"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"which"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"are"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"navigable"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"using"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"arrows"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"instead"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"of"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"tabs"})]})},ArrowNavigationVertical=function ArrowNavigationVertical(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",Object.assign({},Object(tabster__WEBPACK_IMPORTED_MODULE_2__.i)({mover:{direction:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverDirections.Vertical}}),{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Collection,{})}))};ArrowNavigationVertical.displayName="ArrowNavigationVertical";var ArrowNavigationHorizontal=function ArrowNavigationHorizontal(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",Object.assign({},Object(tabster__WEBPACK_IMPORTED_MODULE_2__.i)({mover:{direction:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverDirections.Horizontal}}),{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Collection,{})}))};ArrowNavigationHorizontal.displayName="ArrowNavigationHorizontal";var ArrowNavigationHorizontalRtl=function ArrowNavigationHorizontalRtl(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",Object.assign({dir:"rtl"},Object(tabster__WEBPACK_IMPORTED_MODULE_2__.i)({mover:{direction:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverDirections.Horizontal,cyclic:!0}}),{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Collection,{})}))};ArrowNavigationHorizontalRtl.displayName="ArrowNavigationHorizontalRtl";var ArrowNavigationCircular=function ArrowNavigationCircular(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",Object.assign({},Object(tabster__WEBPACK_IMPORTED_MODULE_2__.i)({mover:{direction:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverDirections.Horizontal,cyclic:!0}}),{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Collection,{})}))};ArrowNavigationCircular.displayName="ArrowNavigationCircular";var NestedMovers=function NestedMovers(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"Tabstop"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",Object.assign({style:{border:"1px solid",padding:10}},Object(tabster__WEBPACK_IMPORTED_MODULE_2__.i)({mover:{cyclic:!0,direction:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverDirections.Horizontal}}),{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Collection,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",Object.assign({style:{marginLeft:10,marginTop:10}},Object(tabster__WEBPACK_IMPORTED_MODULE_2__.i)({mover:{cyclic:!0,direction:tabster__WEBPACK_IMPORTED_MODULE_2__.a.MoverDirections.Horizontal}}),{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Collection,{})})),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{style:{paddingTop:10},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"In root mover"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"In root mover"})]})]})),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("button",{children:"Tabstop"})]})};NestedMovers.displayName="NestedMovers"},697:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"NestedGrouppers",(function(){return Groupper_stories_NestedGrouppers})),__webpack_require__.d(__webpack_exports__,"GroupperRtl",(function(){return Groupper_stories_GroupperRtl})),__webpack_require__.d(__webpack_exports__,"AccordionPrototype",(function(){return Groupper_stories_AccordionPrototype}));__webpack_require__(223),__webpack_require__(129),__webpack_require__(161);var react=__webpack_require__(3),tabster_esm=__webpack_require__(4),jsx_runtime=__webpack_require__(0);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var AccordionContext=react.createContext(void 0),Accordion_Accordion=function(_React$PureComponent){_inherits(Accordion,_React$PureComponent);var _super=_createSuper(Accordion);function Accordion(props){var _this;return _classCallCheck(this,Accordion),(_this=_super.call(this,props)).expandedSection=void 0,_this.state={hasFocus:!1},_this}return _createClass(Accordion,[{key:"render",value:function render(){return Object(jsx_runtime.jsx)("div",{className:"Accordion"+(this.state.hasFocus?" focus":""),children:Object(jsx_runtime.jsx)(AccordionContext.Provider,{value:this,children:this.props.children})})}}]),Accordion}(react.PureComponent),Accordion_AccordionSection=function(_React$PureComponent2){_inherits(AccordionSection,_React$PureComponent2);var _super2=_createSuper(AccordionSection);function AccordionSection(props,context){var _this2;return _classCallCheck(this,AccordionSection),(_this2=_super2.call(this,props))._index=void 0,_this2._div=void 0,_this2._accordion=void 0,_this2._onRef=function(div){var tabster=Object(tabster_esm.d)(window);if(div)_this2._div=div,null==tabster||tabster.focusable.addGroupper(div,void 0,{onChange:_this2._onChange}),_this2._accordion&&!_this2._accordion.expandedSection&&(_this2._accordion.expandedSection=_assertThisInitialized(_this2),_this2.setState({isExpanded:!0}));else if(_this2._div){var _this2$_accordion;null==tabster||tabster.focusable.removeGroupper(_this2._div),(null===(_this2$_accordion=_this2._accordion)||void 0===_this2$_accordion?void 0:_this2$_accordion.expandedSection)===_assertThisInitialized(_this2)&&(_this2._accordion.expandedSection=void 0),delete _this2._div}},_this2._toggle=function(){_this2._accordion&&(_this2._accordion.expandedSection&&_this2._accordion.expandedSection!==_assertThisInitialized(_this2)&&_this2._accordion.expandedSection.setState({isExpanded:!1}),_this2._accordion.expandedSection=_assertThisInitialized(_this2),_this2.setState({isExpanded:!0}))},_this2._onChange=function(state){if(_this2._div&&_this2._accordion){var hasFocus=state.hasFocus||state.siblingHasFocus;_this2._accordion.state.hasFocus!==hasFocus&&_this2._accordion.setState({hasFocus:hasFocus})}},_this2.state={isExpanded:!1},_this2._index=++AccordionSection._index,_this2}return _createClass(AccordionSection,[{key:"render",value:function render(){var _this3=this;return Object(jsx_runtime.jsx)(AccordionContext.Consumer,{children:function children(accordion){return _this3._accordion=accordion,Object(jsx_runtime.jsxs)("div",{ref:_this3._onRef,children:[Object(jsx_runtime.jsx)("h3",{children:Object(jsx_runtime.jsx)("button",{"aria-expanded":!!_this3.state.isExpanded||void 0,className:"Accordion-trigger","aria-controls":"accordion-section-"+_this3._index,id:"accordion-section-title-"+_this3._index,onClick:_this3._toggle,children:Object(jsx_runtime.jsxs)("span",{className:"Accordion-title",children:[_this3.props.title,Object(jsx_runtime.jsx)("span",{className:"Accordion-icon"})]})})}),Object(jsx_runtime.jsx)("div",{id:"accordion-section-"+_this3._index,role:"region","aria-labelledby":"accordion-section-title-"+_this3._index,className:"Accordion-panel",hidden:!_this3.state.isExpanded||void 0,children:Object(jsx_runtime.jsx)("div",{children:_this3.props.children})})]})}})}}]),AccordionSection}(react.PureComponent);Accordion_AccordionSection._index=0;try{Accordion_Accordion.displayName="Accordion",Accordion_Accordion.__docgenInfo={description:"",displayName:"Accordion",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Accordion.tsx#Accordion"]={docgenInfo:Accordion_Accordion.__docgenInfo,name:"Accordion",path:"src/components/Accordion.tsx#Accordion"})}catch(__react_docgen_typescript_loader_error){}try{Accordion_AccordionSection.displayName="AccordionSection",Accordion_AccordionSection.__docgenInfo={description:"",displayName:"AccordionSection",props:{title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Accordion.tsx#AccordionSection"]={docgenInfo:Accordion_AccordionSection.__docgenInfo,name:"AccordionSection",path:"src/components/Accordion.tsx#AccordionSection"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(39);function Item_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Item_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function Item_setPrototypeOf(o,p){return Item_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},Item_setPrototypeOf(o,p)}function Item_createSuper(Derived){var hasNativeReflectConstruct=function Item_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=Item_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=Item_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return Item_possibleConstructorReturn(this,result)}}function Item_possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function Item_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function Item_getPrototypeOf(o){return Item_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},Item_getPrototypeOf(o)}var Item_Item=function(_React$PureComponent){!function Item_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Item_setPrototypeOf(subClass,superClass)}(Item,_React$PureComponent);var _super=Item_createSuper(Item);function Item(){return Item_classCallCheck(this,Item),_super.apply(this,arguments)}return function Item_createClass(Constructor,protoProps,staticProps){return protoProps&&Item_defineProperties(Constructor.prototype,protoProps),staticProps&&Item_defineProperties(Constructor,staticProps),Constructor}(Item,[{key:"render",value:function render(){return Object(jsx_runtime.jsx)("div",Object.assign({tabIndex:0,className:"item"},Object(tabster_esm.i)(Object.assign({groupper:{tabbability:tabster_esm.a.GroupperTabbabilities.Limited}},this.props.mover&&{mover:{direction:tabster_esm.a.MoverDirections.Vertical}})),{children:this.props.children?this.props.children:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("button",{onClick:this.props.onClick,children:"Hello"}),Object(jsx_runtime.jsx)("button",{onClick:this.props.onClick,children:"World"})]})}))}}]),Item}(react.PureComponent);try{Item_Item.displayName="Item",Item_Item.__docgenInfo={description:"",displayName:"Item",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"() => void"}},mover:{defaultValue:null,description:"",name:"mover",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Item.tsx#Item"]={docgenInfo:Item_Item.__docgenInfo,name:"Item",path:"src/components/Item.tsx#Item"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={title:"Groupper"};var Groupper_stories_NestedGrouppers=function NestedGrouppers(){Object(tabster_esm.i)({mover:{direction:tabster_esm.a.MoverDirections.Vertical,tabbable:!0}});return Object(jsx_runtime.jsx)("div",{"aria-label":"Main",children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{mover:!0,children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{mover:!0,children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{mover:!0,children:Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{})]})}),Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{})]})}),Object(jsx_runtime.jsx)(Item_Item,{})]})}),Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{})]})})};Groupper_stories_NestedGrouppers.displayName="NestedGrouppers";var Groupper_stories_GroupperRtl=function GroupperRtl(){return Object(jsx_runtime.jsxs)("div",{dir:"rtl",style:{display:"flex"},children:[Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{}),Object(jsx_runtime.jsx)(Item_Item,{})]})};Groupper_stories_GroupperRtl.displayName="GroupperRtl";var Groupper_stories_AccordionPrototype=function AccordionPrototype(){return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{children:Object(jsx_runtime.jsxs)(Accordion_Accordion,{children:[Object(jsx_runtime.jsx)(Accordion_AccordionSection,{title:"Personal Information",children:Object(jsx_runtime.jsxs)("fieldset",{children:[Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsxs)("label",{htmlFor:"cufc1",children:["Name",Object(jsx_runtime.jsx)("span",{"aria-hidden":"true",children:"*"}),":"]}),Object(jsx_runtime.jsx)("input",{type:"text",defaultValue:"",name:"Name",id:"cufc1",className:"required","aria-required":"true"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsxs)("label",{htmlFor:"cufc2",children:["Email",Object(jsx_runtime.jsx)("span",{"aria-hidden":"true",children:"*"}),":"]}),Object(jsx_runtime.jsx)("input",{type:"text",defaultValue:"",name:"Email",id:"cufc2","aria-required":"true"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"cufc3",children:"Phone:"}),Object(jsx_runtime.jsx)("input",{type:"text",defaultValue:"",name:"Phone",id:"cufc3"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"cufc4",children:"Extension:"}),Object(jsx_runtime.jsx)("input",{type:"text",defaultValue:"",name:"Ext",id:"cufc4"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"cufc5",children:"Country:"}),Object(jsx_runtime.jsx)("input",{type:"text",defaultValue:"",name:"Country",id:"cufc5"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"cufc6",children:"City/Province:"}),Object(jsx_runtime.jsx)("input",{type:"text",defaultValue:"",name:"City_Province",id:"cufc6"})]})]})}),Object(jsx_runtime.jsx)(Accordion_AccordionSection,{title:"Billing Address",children:Object(jsx_runtime.jsxs)("fieldset",{children:[Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"b-add1",children:"Address 1:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"b-add1",id:"b-add1"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"b-add2",children:"Address 2:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"b-add2",id:"b-add2"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"b-city",children:"City:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"b-city",id:"b-city"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"b-state",children:"State:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"b-state",id:"b-state"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"b-zip",children:"Zip Code:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"b-zip",id:"b-zip"})]})]})}),Object(jsx_runtime.jsx)(Accordion_AccordionSection,{title:"Shipping Address",children:Object(jsx_runtime.jsxs)("fieldset",{children:[Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"m-add1",children:"Address 1:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"m-add1",id:"m-add1"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"m-add2",children:"Address 2:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"m-add2",id:"m-add2"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"m-city",children:"City:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"m-city",id:"m-city"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"m-state",children:"State:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"m-state",id:"m-state"})]}),Object(jsx_runtime.jsxs)("p",{children:[Object(jsx_runtime.jsx)("label",{htmlFor:"m-zip",children:"Zip Code:"}),Object(jsx_runtime.jsx)("input",{type:"text",name:"m-zip",id:"m-zip"})]})]})})]})})}},698:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters})),__webpack_require__.d(preview_namespaceObject,"decorators",(function(){return decorators}));__webpack_require__(47),__webpack_require__(27),__webpack_require__(82),__webpack_require__(650),__webpack_require__(55),__webpack_require__(651);var client_api=__webpack_require__(702),esm=__webpack_require__(6),react=(__webpack_require__(39),__webpack_require__(3)),tabster_esm=__webpack_require__(4),jsx_runtime=__webpack_require__(0),parameters={actions:{argTypesRegex:"^on[A-Z].*"}},decorators=[function(Story){return react.useState((function(){var tabster=Object(tabster_esm.b)(window);Object(tabster_esm.g)(tabster),Object(tabster_esm.h)(tabster),Object(tabster_esm.f)(tabster),Object(tabster_esm.e)(tabster)})),react.useEffect((function(){return function(){Object(tabster_esm.d)(window)&&Object(tabster_esm.c)(Object(tabster_esm.d)(window))}}),[]),Object(jsx_runtime.jsx)("div",Object.assign({},Object(tabster_esm.i)({root:{}}),{children:Object(jsx_runtime.jsx)(Story,{})}))}];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":case"argTypes":return esm.a.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify(value));case"decorators":return value.forEach((function(decorator){return Object(client_api.c)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(client_api.d)(loader,!1)}));case"parameters":return Object(client_api.e)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(client_api.a)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(client_api.b)(enhancer)}));case"render":return Object(client_api.g)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(client_api.e)(v,!1);default:return console.log(key+" was not supported :( !")}}))},699:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"ModalDialog",(function(){return Modalizer_stories_ModalDialog})),__webpack_require__.d(__webpack_exports__,"NativeFocus",(function(){return Modalizer_stories_NativeFocus})),__webpack_require__.d(__webpack_exports__,"ModalizerAPIFocus",(function(){return Modalizer_stories_ModalizerAPIFocus})),__webpack_require__.d(__webpack_exports__,"AlwaysOnPage",(function(){return Modalizer_stories_AlwaysOnPage})),__webpack_require__.d(__webpack_exports__,"AllowFocusOutside",(function(){return Modalizer_stories_AllowFocusOutside})),__webpack_require__.d(__webpack_exports__,"ModalizerStack",(function(){return Modalizer_stories_ModalizerStack}));__webpack_require__(39),__webpack_require__(27),__webpack_require__(38),__webpack_require__(24),__webpack_require__(42),__webpack_require__(31),__webpack_require__(26),__webpack_require__(30),__webpack_require__(40),__webpack_require__(34),__webpack_require__(60),__webpack_require__(223),__webpack_require__(129),__webpack_require__(161);var react=__webpack_require__(3),tabster_esm=__webpack_require__(4),jsx_runtime=__webpack_require__(0);function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var Modal_Modal=function(_React$PureComponent){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Modal,_React$PureComponent);var _super=_createSuper(Modal);function Modal(props){var _this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Modal),(_this=_super.call(this,props))._div=void 0,_this.tabsterModalizer=void 0,_this.tabsterDeloser=void 0,_this._onRef=function(el){_this.tabsterModalizer&&_this.tabsterDeloser&&(el?(_this._div=el,_this.tabsterModalizer.add(el,{id:"modal"}),_this.tabsterDeloser.add(el),_this.tabsterModalizer.focus(el)):_this._div&&(_this.tabsterModalizer.remove(_this._div),_this.tabsterDeloser.remove(_this._div),_this._div=void 0))},_this._onBtnClick=function(){_this.setState({isVisible:!1})},_this.state={isVisible:!1};var tabsterInstance=Object(tabster_esm.d)(window);return tabsterInstance&&(_this.tabsterModalizer=Object(tabster_esm.g)(tabsterInstance),_this.tabsterDeloser=Object(tabster_esm.e)(tabsterInstance)),_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Modal,[{key:"render",value:function render(){return this.state.isVisible?Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsx)("div",{className:"lightbox"}),Object(jsx_runtime.jsxs)("div",{ref:this._onRef,"aria-label":"Modal",role:"region",className:"modal",children:[Object(jsx_runtime.jsx)("h3",{children:"Piu piu"}),Object(jsx_runtime.jsx)("button",{onClick:this._onBtnClick,children:"Close"})," or ",Object(jsx_runtime.jsx)("button",{onClick:this._onBtnClick,children:"Dismiss"})]})]}):null}},{key:"show",value:function show(){this.setState({isVisible:!0})}}]),Modal}(react.PureComponent);try{Modal_Modal.displayName="Modal",Modal_Modal.__docgenInfo={description:"",displayName:"Modal",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Modal.tsx#Modal"]={docgenInfo:Modal_Modal.__docgenInfo,name:"Modal",path:"src/components/Modal.tsx#Modal"})}catch(__react_docgen_typescript_loader_error){}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={title:"Modalizer"};var Modalizer_stories_ModalDialog=function ModalDialog(){var ref=react.useRef(null);return Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("div",Object.assign({},Object(tabster_esm.i)({deloser:{}}),{children:Object(jsx_runtime.jsx)("button",{onClick:function onClick(){var _ref$current;return null===(_ref$current=ref.current)||void 0===_ref$current?void 0:_ref$current.show()},children:"Open modal"})})),Object(jsx_runtime.jsx)(Modal_Modal,{ref:ref})]})},popupStyles={maxWidth:400,maxHeight:400,border:"2px solid green",padding:5,marginTop:5,marginBottom:5},Modalizer_stories_NativeFocus=function NativeFocus(){var _React$useState2=_slicedToArray(react.useState(!1),2),open=_React$useState2[0],setOpen=_React$useState2[1],popupRef=react.useRef(null);react.useEffect((function(){if(open&&popupRef.current){var _getCurrentTabster,first=null===(_getCurrentTabster=Object(tabster_esm.d)(window))||void 0===_getCurrentTabster?void 0:_getCurrentTabster.focusable.findFirst(popupRef.current);null==first||first.focus()}}),[popupRef,open]);var onClick=function onClick(){return setOpen((function(s){return!s}))};return Object(jsx_runtime.jsxs)("div",Object.assign({},Object(tabster_esm.i)({deloser:{}}),{children:[Object(jsx_runtime.jsx)("button",{onClick:onClick,children:"Toggle popup"}),open&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",Object.assign({ref:popupRef,"aria-label":"popup",style:popupStyles},Object(tabster_esm.i)({deloser:{},modalizer:{id:"modalizer"}}),{children:[Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("button",{onClick:onClick,children:"Dismiss"})]})),Object(jsx_runtime.jsx)("button",{children:"Outside Modalizer"})]})]}))};Modalizer_stories_NativeFocus.displayName="NativeFocus";var Modalizer_stories_ModalizerAPIFocus=function ModalizerAPIFocus(){var _React$useState4=_slicedToArray(react.useState(!1),2),open=_React$useState4[0],setOpen=_React$useState4[1],popupRef=react.useRef(null);react.useEffect((function(){var tabster=Object(tabster_esm.d)(window),modalizer=tabster&&Object(tabster_esm.g)(tabster);open&&popupRef.current&&modalizer&&modalizer.focus(popupRef.current)}),[open,popupRef]);var onClick=function onClick(){return setOpen((function(s){return!s}))};return Object(jsx_runtime.jsxs)("div",Object.assign({},Object(tabster_esm.i)({deloser:{}}),{children:[Object(jsx_runtime.jsx)("button",{onClick:onClick,children:"Toggle popup"}),open&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",Object.assign({ref:popupRef,"aria-label":"popup",style:popupStyles},Object(tabster_esm.i)({deloser:{},modalizer:{id:"modalizer"}}),{children:[Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("button",{onClick:onClick,children:"Dismiss"})]})),Object(jsx_runtime.jsx)("button",{children:"Outside Modalizer"})]})]}))};Modalizer_stories_ModalizerAPIFocus.displayName="ModalizerAPIFocus";var Modalizer_stories_AlwaysOnPage=function AlwaysOnPage(){var modalRef=react.useRef(null),outsideRef=react.useRef(null);return Object(jsx_runtime.jsxs)("div",Object.assign({},Object(tabster_esm.i)({deloser:{}}),{children:[Object(jsx_runtime.jsx)("button",{onClick:function focusIn(){if(modalRef.current){var _getCurrentTabster2;modalRef.current.removeAttribute("aria-hidden");var first=null===(_getCurrentTabster2=Object(tabster_esm.d)(window))||void 0===_getCurrentTabster2?void 0:_getCurrentTabster2.focusable.findFirst(modalRef.current);null==first||first.focus()}},children:"Focus modalizer"}),Object(jsx_runtime.jsxs)("div",Object.assign({"aria-hidden":!0,ref:modalRef,"aria-label":"popup",style:popupStyles},Object(tabster_esm.i)({modalizer:{id:"modalizer"}}),{children:[Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("button",{onClick:function focusOut(){modalRef.current&&outsideRef.current&&(modalRef.current.setAttribute("aria-hidden","true"),outsideRef.current.focus())},children:"Focus out"})]})),Object(jsx_runtime.jsx)("button",{ref:outsideRef,children:"Outside modal"})]}))};Modalizer_stories_AlwaysOnPage.displayName="AlwaysOnPage";var Modalizer_stories_AllowFocusOutside=function AllowFocusOutside(){var modalRef=react.useRef(null),outsideRef=react.useRef(null);return Object(jsx_runtime.jsxs)("div",Object.assign({},Object(tabster_esm.i)({deloser:{}}),{children:[Object(jsx_runtime.jsx)("button",{onClick:function focusIn(){if(modalRef.current){var _getCurrentTabster3;modalRef.current.removeAttribute("aria-hidden");var first=null===(_getCurrentTabster3=Object(tabster_esm.d)(window))||void 0===_getCurrentTabster3?void 0:_getCurrentTabster3.focusable.findFirst(modalRef.current);null==first||first.focus()}},children:"Activate modalizer"}),Object(jsx_runtime.jsxs)("div",Object.assign({"aria-hidden":!0,ref:modalRef,"aria-label":"popup",style:popupStyles},Object(tabster_esm.i)({modalizer:{id:"modalizer",isOthersAccessible:!0}}),{children:[Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("div",{tabIndex:0,children:"Focusable item"}),Object(jsx_runtime.jsx)("button",{onClick:function focusOut(){modalRef.current&&outsideRef.current&&(modalRef.current.setAttribute("aria-hidden","true"),outsideRef.current.focus())},children:"Deactivate modalizer"})]})),Object(jsx_runtime.jsx)("button",{ref:outsideRef,children:"Outside modal"})]}))};Modalizer_stories_AllowFocusOutside.displayName="AllowFocusOutside";var Modalizer_stories_ModalizerStack=function ModalizerStack(){var _React$useState6=_slicedToArray(react.useState(!1),2),open=_React$useState6[0],setOpen=_React$useState6[1],_React$useState8=_slicedToArray(react.useState(!1),2),secondOpen=_React$useState8[0],setSecondOpen=_React$useState8[1],_React$useState10=_slicedToArray(react.useState(!1),2),thirdOpen=_React$useState10[0],setThirdOpen=_React$useState10[1],popupRef=react.useRef(null),secondPopupRef=react.useRef(null),thirdPopupRef=react.useRef(null);react.useEffect((function(){if(open&&popupRef.current){var _getCurrentTabster4,first=null===(_getCurrentTabster4=Object(tabster_esm.d)(window))||void 0===_getCurrentTabster4?void 0:_getCurrentTabster4.focusable.findFirst(popupRef.current);null==first||first.focus()}}),[popupRef,open]),react.useEffect((function(){if(secondOpen&&secondPopupRef.current){var _getCurrentTabster5,first=null===(_getCurrentTabster5=Object(tabster_esm.d)(window))||void 0===_getCurrentTabster5?void 0:_getCurrentTabster5.focusable.findFirst(secondPopupRef.current);null==first||first.focus()}}),[secondPopupRef,secondOpen]),react.useEffect((function(){if(thirdOpen&&thirdPopupRef.current){var _getCurrentTabster6,first=null===(_getCurrentTabster6=Object(tabster_esm.d)(window))||void 0===_getCurrentTabster6?void 0:_getCurrentTabster6.focusable.findFirst(thirdPopupRef.current);null==first||first.focus()}}),[thirdPopupRef,thirdOpen]);return Object(jsx_runtime.jsxs)("div",Object.assign({},Object(tabster_esm.i)({deloser:{}}),{children:[Object(jsx_runtime.jsx)("button",{onClick:function onClick(){return setOpen((function(s){return!s}))},children:"Toggle popup"}),open&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",Object.assign({ref:popupRef,"aria-label":"popup",style:popupStyles},Object(tabster_esm.i)({deloser:{},modalizer:{id:"modalizer"}}),{children:[Object(jsx_runtime.jsx)("button",{onClick:function onClick(){return setSecondOpen(!0)},children:"Open next"}),Object(jsx_runtime.jsx)("button",{onClick:function onClick(){return setOpen(!1)},children:"Dismiss"})]})),Object(jsx_runtime.jsx)("button",{children:"Outside Modalizer"})]}),secondOpen&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsxs)("div",Object.assign({ref:secondPopupRef,"aria-label":"popup",style:popupStyles},Object(tabster_esm.i)({deloser:{},modalizer:{id:"modalizer-2"}}),{children:[Object(jsx_runtime.jsx)("button",{onClick:function onClick(){return setThirdOpen(!0)},children:"Open next"}),Object(jsx_runtime.jsx)("button",{onClick:function onClick(){return setSecondOpen(!1)},children:"Dismiss"})]})),Object(jsx_runtime.jsx)("button",{children:"Outside Modalizer"})]}),thirdOpen&&Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[Object(jsx_runtime.jsx)("div",Object.assign({ref:thirdPopupRef,"aria-label":"popup",style:popupStyles},Object(tabster_esm.i)({deloser:{},modalizer:{id:"modalizer-3"}}),{children:Object(jsx_runtime.jsx)("button",{onClick:function onClick(){return setThirdOpen(!1)},children:"Dismiss"})})),Object(jsx_runtime.jsx)("button",{children:"Outside Modalizer"})]}),Object(jsx_runtime.jsx)("button",{onClick:function onClick(){setOpen(!1),setSecondOpen(!1),setThirdOpen(!1)},children:"Close all"})]}))};Modalizer_stories_ModalizerStack.displayName="ModalizerStack"}},[[346,1,2]]]);
//# sourceMappingURL=main.425aa12b.iframe.bundle.js.map